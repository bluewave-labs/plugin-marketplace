var PluginJiraAssets=function(J,e,r,s){"use strict";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Se={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),M=(c,d)=>{const y=r.forwardRef(({color:a="currentColor",size:A=24,strokeWidth:j=2,absoluteStrokeWidth:S,className:z="",children:C,...T},t)=>r.createElement("svg",{ref:t,...Se,width:A,height:A,stroke:a,strokeWidth:S?Number(j)*24/Number(A):j,className:["lucide",`lucide-${Ce(c)}`,z].join(" "),...T},[...d.map(([L,u])=>r.createElement(L,u)),...Array.isArray(C)?C:[C]]));return y.displayName=`${c}`,y};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=M("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=M("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=M("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=M("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=M("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=M("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=M("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=M("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=M("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=M("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ue=({configData:c={},onConfigChange:d,onSaveConfiguration:y,onTestConnection:a,isSavingConfig:A=!1,isTestingConnection:j=!1,apiServices:S,pluginApiCall:z})=>{const C=r.useCallback(async(o,l,x)=>{var ce;if(z)return z(o,l,x);if(!S)throw new Error("No API service available");const p=`/plugins/jira-assets${l.startsWith("/")?l:`/${l}`}`;let v;switch(o.toUpperCase()){case"GET":v=await S.get(p);break;case"POST":v=await S.post(p,x);break;case"PUT":v=await S.put(p,x);break;case"PATCH":v=await S.patch(p,x);break;case"DELETE":v=await S.delete(p);break;default:throw new Error(`Unsupported method: ${o}`)}return((ce=v.data)==null?void 0:ce.data)??v.data},[S,z]),T=!!(S||z),[t,L]=r.useState({deployment_type:"cloud",sync_enabled:!1,sync_interval_hours:24,...c}),[u,k]=r.useState(!1),[D,w]=r.useState([]),[f,U]=r.useState([]),[_,G]=r.useState(!1),[oe,Y]=r.useState(!1),[N,V]=r.useState("idle"),[I,q]=r.useState(""),[ne,X]=r.useState(!1),[$,H]=r.useState(null),[F,ie]=r.useState([]),[W,Q]=r.useState(new Set),[m,te]=r.useState(!1),[R,ee]=r.useState(!1),[P,E]=r.useState(null),[n,i]=r.useState([]),[b,B]=r.useState(!1);r.useEffect(()=>{if(u||!S)return;(async()=>{var l;try{const p=await S.get("/plugins/jira-assets/config"),v=((l=p.data)==null?void 0:l.data)??p.data;v&&L(ce=>({...ce,...v}))}catch(x){console.error("Failed to load JIRA config:",x)}finally{k(!0)}})()},[S,u]);const g=r.useCallback((o,l)=>{L(x=>({...x,[o]:l})),d&&d(o,l)},[d]),O=r.useCallback(async()=>{if(!(!T||!t.jira_base_url||!t.workspace_id)){G(!0);try{const o=await C("GET","/schemas");o&&Array.isArray(o)&&w(o)}catch(o){console.error("Failed to load schemas:",o)}finally{G(!1)}}},[T,C,t.jira_base_url,t.workspace_id]),ae=r.useCallback(async o=>{if(!(!T||!o)){Y(!0);try{const l=await C("GET",`/schemas/${o}/object-types`);console.log("[JiraConfig] loadObjectTypes response:",l,"isArray:",Array.isArray(l)),l&&Array.isArray(l)?U(l):console.warn("[JiraConfig] Object types response is not an array:",typeof l)}catch(l){console.error("Failed to load object types:",l)}finally{Y(!1)}}},[T,C]),he=r.useCallback(async()=>{if(!(!T||!t.selected_object_type_id)){te(!0),E(null);try{const o=await C("GET",`/object-types/${t.selected_object_type_id}/objects`);if(o&&Array.isArray(o)){const l=new Set(n.map(p=>p.jira_object_id)),x=o.filter(p=>!l.has(p.id));ie(x)}}catch(o){E({type:"error",text:o.message||"Failed to load JIRA objects"})}finally{te(!1)}}},[T,C,t.selected_object_type_id,n]),se=r.useCallback(async()=>{if(T){B(!0);try{const o=await C("GET","/use-cases");o&&Array.isArray(o)&&i(o)}catch(o){console.error("Failed to load imported use cases:",o)}finally{B(!1)}}},[T,C]),Fe=async()=>{if(!(!T||W.size===0)){ee(!0),E(null);try{const o=await C("POST","/import",{object_ids:Array.from(W)});o!=null&&o.success?(E({type:"success",text:`Successfully imported ${o.imported} objects`}),Q(new Set),await se(),await he()):E({type:"error",text:(o==null?void 0:o.error)||"Import failed"})}catch(o){E({type:"error",text:o.message||"Import failed"})}finally{ee(!1)}}},Ee=async o=>{var p;if(!T)return;const l=typeof o.data=="string"?JSON.parse(o.data):o.data,x=(l==null?void 0:l.label)||((p=l==null?void 0:l.attributes)==null?void 0:p.Name)||o.uc_id;if(window.confirm(`Are you sure you want to delete "${x}"?`))try{await C("DELETE",`/use-cases/${o.id}`),await se(),await he()}catch(v){E({type:"error",text:v.message||"Failed to delete"})}},Me=o=>{Q(l=>{const x=new Set(l);return x.has(o)?x.delete(o):x.add(o),x})},Le=()=>{W.size===F.length?Q(new Set):Q(new Set(F.map(o=>o.id)))},De=async()=>{if(!T){a&&a();return}V("testing"),q("");try{const o=await C("POST","/test-connection",{configuration:{jira_base_url:t.jira_base_url,workspace_id:t.workspace_id,email:t.email,api_token:t.api_token,deployment_type:t.deployment_type||"cloud"}});o!=null&&o.success?(V("success"),q(o.message||"Connection successful. Click 'Save Configuration' to proceed to Step 2.")):(V("error"),q((o==null?void 0:o.message)||"Connection failed"))}catch(o){V("error"),q(o.message||"Connection test failed")}},Ue=async()=>{var o,l;if(S){X(!0),H(null);try{const x=await S.post("/plugins/jira-assets/config",{jira_base_url:t.jira_base_url,workspace_id:t.workspace_id,email:t.email,api_token:t.api_token||void 0,deployment_type:t.deployment_type||"cloud",selected_schema_id:t.selected_schema_id||void 0,selected_object_type_id:t.selected_object_type_id||void 0,sync_enabled:t.sync_enabled||!1,sync_interval_hours:t.sync_interval_hours||24}),p=((o=x.data)==null?void 0:o.data)??x.data;p!=null&&p.success?(H({type:"success",text:"Configuration saved successfully!"}),L(v=>({...v,has_api_token:!0})),k(!1)):H({type:"error",text:((l=p==null?void 0:p.errors)==null?void 0:l.join(", "))||(p==null?void 0:p.message)||"Failed to save configuration"})}catch(x){H({type:"error",text:x.message||"Failed to save configuration"})}finally{X(!1)}}},Ne=o=>{g("selected_schema_id",o),g("selected_object_type_id",""),U([]),o&&ae(o)};r.useEffect(()=>{console.log("[JiraConfig] Schema load check:",{has_api_token:t.has_api_token,jira_base_url:t.jira_base_url,workspace_id:t.workspace_id,schemas_length:D.length}),t.has_api_token&&t.jira_base_url&&t.workspace_id&&D.length===0&&(console.log("[JiraConfig] Calling loadSchemas()"),O())},[t.has_api_token,t.jira_base_url,t.workspace_id,O,D.length]),r.useEffect(()=>{t.has_api_token&&t.selected_schema_id&&f.length===0&&ae(t.selected_schema_id)},[t.has_api_token,t.selected_schema_id,ae,f.length]),r.useEffect(()=>{T&&u&&se()},[T,u,se]);const Pe=[{value:1,label:"Every hour"},{value:6,label:"Every 6 hours"},{value:12,label:"Every 12 hours"},{value:24,label:"Every 24 hours"},{value:48,label:"Every 48 hours"}];return e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",fontSize:13,sx:{mb:3},children:"Connect to your Jira Service Management Assets to import AI Systems as use-cases."}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 1: Connection Settings"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Deployment Type *"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:t.deployment_type||"cloud",onChange:o=>g("deployment_type",o.target.value),sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"cloud",sx:{fontSize:"13px"},children:"JIRA Cloud (Atlassian-hosted)"}),e.jsx(s.MenuItem,{value:"datacenter",sx:{fontSize:"13px"},children:"JIRA Data Center / Server (Self-hosted)"})]})}),e.jsx(s.Typography,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:"Select Cloud for *.atlassian.net, or Data Center for self-hosted JIRA"})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"JIRA Base URL *"}),e.jsx(s.TextField,{fullWidth:!0,placeholder:t.deployment_type==="datacenter"?"https://jira.your-company.com":"https://your-company.atlassian.net",value:t.jira_base_url||"",onChange:o=>g("jira_base_url",o.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[t.deployment_type==="datacenter"?"Insight Object Schema ID":"Workspace ID"," *"]}),e.jsx(s.TextField,{fullWidth:!0,placeholder:t.deployment_type==="datacenter"?"Enter object schema ID (e.g., 1)":"Enter your JSM Assets workspace ID",value:t.workspace_id||"",onChange:o=>g("workspace_id",o.target.value),size:"small",helperText:t.deployment_type==="datacenter"?"For Data Center: Use object schema ID from Insight settings":"Found in Assets settings or the URL when viewing Assets",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[t.deployment_type==="datacenter"?"Username":"Email"," *"]}),e.jsx(s.TextField,{fullWidth:!0,type:t.deployment_type==="datacenter"?"text":"email",placeholder:t.deployment_type==="datacenter"?"your-username":"your-email@company.com",value:t.email||"",onChange:o=>g("email",o.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsxs(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:[t.deployment_type==="datacenter"?"Password / Token":"API Token"," ",!t.has_api_token&&"*"]}),e.jsx(s.TextField,{fullWidth:!0,type:"password",placeholder:t.has_api_token&&!t.api_token?"••••••••••••••••  (saved - enter new value to change)":t.deployment_type==="datacenter"?"Enter your password or personal access token":"Enter your Atlassian API token",value:t.api_token||"",onChange:o=>g("api_token",o.target.value),size:"small",helperText:t.has_api_token&&!t.api_token?"API token is saved. Leave empty to keep current token, or enter a new value to update.":t.deployment_type==="datacenter"?"Use your JIRA password or personal access token":"Generate at id.atlassian.com/manage-profile/security/api-tokens",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]})]}),N!=="idle"&&e.jsx(s.Box,{sx:{mt:2},children:e.jsx(s.Alert,{severity:N==="success"?"success":N==="error"?"error":"info",sx:{fontSize:"13px"},children:N==="testing"?"Testing connection...":I})}),e.jsx(s.Box,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:e.jsx(s.Button,{variant:"outlined",onClick:De,disabled:j||N==="testing"||!t.jira_base_url||!t.workspace_id||!t.email||!t.api_token&&!t.has_api_token,sx:{borderColor:"#13715B",color:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{borderColor:"#0f5a47",backgroundColor:"rgba(19, 113, 91, 0.04)"},"&:disabled":{borderColor:"#d0d5dd",color:"#98a2b3"}},children:j||N==="testing"?e.jsxs(e.Fragment,{children:[e.jsx(s.CircularProgress,{size:16,sx:{mr:1}}),"Testing..."]}):"Test Connection"})}),e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 2: Select Schema & Object Type"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Schema"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:t.selected_schema_id||"",onChange:o=>Ne(o.target.value),disabled:_||D.length===0,displayEmpty:!0,sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"",sx:{fontSize:"13px"},children:_?"Loading schemas...":"Select a schema"}),D.map(o=>e.jsxs(s.MenuItem,{value:o.id,sx:{fontSize:"13px"},children:[o.name," (",o.objectSchemaKey,")"]},o.id))]})})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Object Type (AI Systems)"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:t.selected_object_type_id||"",onChange:o=>g("selected_object_type_id",o.target.value),disabled:oe||f.length===0||!t.selected_schema_id,displayEmpty:!0,sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"",sx:{fontSize:"13px"},children:oe?"Loading object types...":"Select an object type"}),f.map(o=>e.jsxs(s.MenuItem,{value:o.id,sx:{fontSize:"13px"},children:[o.name,o.objectCount!==void 0&&e.jsx(s.Chip,{label:`${o.objectCount} objects`,size:"small",sx:{ml:1,fontSize:"11px"}})]},o.id))]})})]})]}),e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 3: Sync Settings"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsx(s.Box,{children:e.jsx(s.FormControlLabel,{control:e.jsx(s.Switch,{checked:t.sync_enabled||!1,onChange:o=>g("sync_enabled",o.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#13715B"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#13715B"}}}),label:e.jsx(s.Typography,{variant:"body2",fontSize:13,sx:{color:"#344054"},children:"Enable automatic sync"})})}),t.sync_enabled&&e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Sync Interval"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsx(s.Select,{value:t.sync_interval_hours||24,onChange:o=>g("sync_interval_hours",o.target.value),sx:{fontSize:"13px",backgroundColor:"white"},children:Pe.map(o=>e.jsx(s.MenuItem,{value:o.value,sx:{fontSize:"13px"},children:o.label},o.value))})})]})]}),t.last_sync_at&&e.jsx(s.Box,{sx:{mt:2},children:e.jsxs(s.Alert,{severity:t.last_sync_status==="success"?"success":"warning",sx:{fontSize:"13px"},children:["Last sync: ",new Date(t.last_sync_at).toLocaleString()," -"," ",t.last_sync_status==="success"?"Successful":t.last_sync_message]})}),$&&e.jsx(s.Box,{sx:{mt:2},children:e.jsx(s.Alert,{severity:$.type,sx:{fontSize:"13px"},onClose:()=>H(null),children:$.text})}),e.jsx(s.Box,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:e.jsx(s.Button,{variant:"contained",onClick:Ue,disabled:ne||!t.jira_base_url||!t.workspace_id||!t.email||!t.api_token&&!t.has_api_token,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{backgroundColor:"#0f5a47"},"&:disabled":{backgroundColor:"#d0d5dd"}},children:ne?e.jsxs(e.Fragment,{children:[e.jsx(s.CircularProgress,{size:16,sx:{mr:1,color:"white"}}),"Saving..."]}):"Save Configuration"})}),t.has_api_token&&t.selected_object_type_id&&e.jsxs(e.Fragment,{children:[e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 4: Import JIRA Objects"}),e.jsx(s.Box,{sx:{display:"flex",gap:2,mb:2},children:e.jsx(s.Button,{variant:"outlined",startIcon:m?e.jsx(s.CircularProgress,{size:16}):e.jsx(le,{size:16}),onClick:he,disabled:m,sx:{borderColor:"#13715B",color:"#13715B",textTransform:"none",fontSize:"13px","&:hover":{borderColor:"#0f5a47",backgroundColor:"rgba(19, 113, 91, 0.04)"}},children:m?"Loading...":"Fetch Objects from JIRA"})}),P&&e.jsx(s.Alert,{severity:P.type,sx:{mb:2,fontSize:"13px"},onClose:()=>E(null),children:P.text}),F.length>0&&e.jsxs(s.Box,{sx:{mb:3},children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(s.FormControlLabel,{control:e.jsx(s.Checkbox,{checked:W.size===F.length&&F.length>0,indeterminate:W.size>0&&W.size<F.length,onChange:Le,size:"small"}),label:e.jsxs(s.Typography,{variant:"body2",fontSize:13,children:["Select All (",F.length," available)"]})}),e.jsx(s.Button,{variant:"contained",onClick:Fe,disabled:R||W.size===0,startIcon:R?e.jsx(s.CircularProgress,{size:16}):e.jsx(le,{size:16}),sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px","&:hover":{backgroundColor:"#0f5a47"}},children:R?"Importing...":`Import ${W.size} Selected`})]}),e.jsx(s.TableContainer,{component:s.Paper,sx:{maxHeight:300,boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{sx:{backgroundColor:"#f9fafb"},children:[e.jsx(s.TableCell,{padding:"checkbox"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"})]})}),e.jsx(s.TableBody,{children:F.map(o=>e.jsxs(s.TableRow,{hover:!0,selected:W.has(o.id),onClick:()=>Me(o.id),sx:{cursor:"pointer"},children:[e.jsx(s.TableCell,{padding:"checkbox",children:e.jsx(s.Checkbox,{checked:W.has(o.id),size:"small"})}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:o.key}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:o.name})]},o.id))})]})})]}),F.length===0&&!m&&e.jsx(s.Alert,{severity:"info",sx:{mb:3,fontSize:"13px"},children:'Click "Fetch Objects from JIRA" to load available objects for import.'}),e.jsx(s.Divider,{sx:{my:3}}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{color:"#344054"},children:["Imported Use Cases (",n.length,")"]}),e.jsx(s.Button,{variant:"text",startIcon:e.jsx(xe,{size:14}),onClick:se,disabled:b,sx:{textTransform:"none",fontSize:"12px",color:"#667085"},children:"Refresh"})]}),b?e.jsx(s.Box,{sx:{display:"flex",justifyContent:"center",py:2},children:e.jsx(s.CircularProgress,{size:24})}):n.length===0?e.jsx(s.Alert,{severity:"info",sx:{fontSize:"13px"},children:"No objects imported yet. Fetch objects from JIRA and import them above."}):e.jsx(s.TableContainer,{component:s.Paper,sx:{maxHeight:400,boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{sx:{backgroundColor:"#f9fafb"},children:[e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"UC-ID"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"JIRA Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Status"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},align:"right",children:"Actions"})]})}),e.jsx(s.TableBody,{children:n.map(o=>{var v;const l=typeof o.data=="string"?JSON.parse(o.data):o.data,x=(l==null?void 0:l.label)||((v=l==null?void 0:l.attributes)==null?void 0:v.Name)||"-",p=(l==null?void 0:l.objectKey)||"-";return e.jsxs(s.TableRow,{hover:!0,children:[e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:o.uc_id}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:x}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:p}),e.jsx(s.TableCell,{children:e.jsx(s.Chip,{label:o.sync_status,size:"small",color:o.sync_status==="synced"?"success":o.sync_status==="updated"?"info":"default",sx:{fontSize:"11px"}})}),e.jsx(s.TableCell,{align:"right",children:e.jsx(s.Tooltip,{title:"Delete",children:e.jsx(s.IconButton,{size:"small",onClick:()=>Ee(o),color:"error",children:e.jsx(de,{size:16})})})})]},o.id)})})]})})]})]})},we=({apiServices:c,pluginApiCall:d})=>{const y=r.useCallback(async(n,i,b)=>{var O;if(d)return d(n,i,b);if(!c)throw new Error("No API service available");const B=`/plugins/jira-assets${i.startsWith("/")?i:`/${i}`}`;let g;switch(n.toUpperCase()){case"GET":g=await c.get(B);break;case"POST":g=await c.post(B,b);break;case"PUT":g=await c.put(B,b);break;case"PATCH":g=await c.patch(B,b);break;case"DELETE":g=await c.delete(B);break;default:throw new Error(`Unsupported method: ${n}`)}return((O=g.data)==null?void 0:O.data)??g.data},[c,d]),a=!!(c||d),[A,j]=r.useState([]),[S,z]=r.useState(!0),[C,T]=r.useState(!1),[t,L]=r.useState(null),[u,k]=r.useState(null),[D,w]=r.useState(!1),[f,U]=r.useState([]),[_,G]=r.useState(new Set),[oe,Y]=r.useState(!1),[N,V]=r.useState(!1),[I,q]=r.useState(null),[ne,X]=r.useState(!1),$=r.useCallback(async()=>{if(a){z(!0),k(null);try{const n=await y("GET","/use-cases");Array.isArray(n)&&j(n)}catch(n){k(n.message||"Failed to load use cases")}finally{z(!1)}}},[a,y]),H=r.useCallback(async()=>{if(a)try{const n=await y("GET","/sync/status");L(n)}catch(n){console.error("Failed to load sync status:",n)}},[a,y]);r.useEffect(()=>{$(),H()},[$,H]);const F=async()=>{if(a){T(!0),k(null);try{const n=await y("POST","/sync");n!=null&&n.success?(await $(),await H()):k((n==null?void 0:n.status)||"Sync failed")}catch(n){k(n.message||"Sync failed")}finally{T(!1)}}},ie=async()=>{if(a){w(!0),Y(!0),G(new Set),U([]);try{const n=await y("GET","/config"),i=n==null?void 0:n.selected_object_type_id;if(!i){k("No object type configured. Please configure the plugin first."),Y(!1);return}const b=await y("GET",`/object-types/${i}/objects`);if(Array.isArray(b)){const B=new Set(A.map(O=>O.jira_object_id)),g=b.filter(O=>!B.has(O.id));U(g)}}catch(n){k(n.message||"Failed to load JIRA objects")}finally{Y(!1)}}},W=n=>{G(i=>{const b=new Set(i);return b.has(n)?b.delete(n):b.add(n),b})},Q=()=>{_.size===f.length?G(new Set):G(new Set(f.map(n=>n.id)))},m=async()=>{if(!(!y||_.size===0)){V(!0),k(null);try{const n=await y("POST","/import",{object_ids:Array.from(_)});n!=null&&n.success?(w(!1),await $()):k((n==null?void 0:n.error)||"Import failed")}catch(n){k(n.message||"Import failed")}finally{V(!1)}}},te=n=>{q(n),X(!0)},R=n=>{var b;const i=typeof n.data=="string"?JSON.parse(n.data):n.data;return(i==null?void 0:i.label)||((b=i==null?void 0:i.attributes)==null?void 0:b.Name)||n.uc_id},ee=async n=>{if(a&&window.confirm(`Are you sure you want to delete "${R(n)}"?`))try{await y("DELETE",`/use-cases/${n.id}`),await $(),(I==null?void 0:I.id)===n.id&&(X(!1),q(null))}catch(i){k(i.message||"Failed to delete use case")}},P=n=>n?new Date(n).toLocaleString():"N/A",E=n=>{switch(n){case"synced":return e.jsx(s.Chip,{label:"Synced",size:"small",color:"success",sx:{fontSize:"11px"}});case"updated":return e.jsx(s.Chip,{label:"Updated",size:"small",color:"info",sx:{fontSize:"11px"}});case"deleted_in_jira":return e.jsx(s.Chip,{label:"Deleted in JIRA",size:"small",color:"error",sx:{fontSize:"11px"}});default:return e.jsx(s.Chip,{label:n,size:"small",sx:{fontSize:"11px"}})}};return e.jsxs(s.Box,{sx:{p:3},children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"h6",fontWeight:600,children:"JIRA AI Systems"}),e.jsx(s.Typography,{variant:"body2",color:"text.secondary",fontSize:13,children:"AI Systems imported from Jira Service Management Assets"})]}),e.jsxs(s.Box,{sx:{display:"flex",gap:2},children:[e.jsx(s.Button,{variant:"outlined",startIcon:C?e.jsx(s.CircularProgress,{size:16}):e.jsx(xe,{size:16}),onClick:F,disabled:C,sx:{borderColor:"#d0d5dd",color:"#344054",textTransform:"none",fontSize:"13px"},children:C?"Syncing...":"Sync Now"}),e.jsx(s.Button,{variant:"contained",startIcon:e.jsx(le,{size:16}),onClick:ie,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px","&:hover":{backgroundColor:"#0f5a47"}},children:"Import from JIRA"})]})]}),t&&e.jsx(s.Alert,{severity:t.last_sync_status==="success"?"success":t.last_sync_status==="failed"?"warning":"info",sx:{mb:2,fontSize:"13px"},icon:e.jsx(Te,{size:18}),children:e.jsxs(s.Box,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs("span",{children:["Last sync: ",t.last_sync_at?P(t.last_sync_at):"Never"]}),t.sync_enabled&&e.jsx(s.Chip,{label:`Auto-sync: Every ${t.sync_interval_hours}h`,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"11px"}})]})}),u&&e.jsx(s.Alert,{severity:"error",sx:{mb:2,fontSize:"13px"},onClose:()=>k(null),children:u}),S?e.jsx(s.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(s.CircularProgress,{})}):A.length===0?e.jsxs(s.Paper,{sx:{p:4,textAlign:"center"},children:[e.jsx(pe,{size:48,color:"#98a2b3"}),e.jsx(s.Typography,{variant:"h6",sx:{mt:2,color:"#344054"},children:"No JIRA AI Systems Imported"}),e.jsx(s.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:'Click "Import from JIRA" to start importing AI Systems from your JSM Assets.'})]}):e.jsx(s.TableContainer,{component:s.Paper,sx:{boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{sx:{backgroundColor:"#f9fafb"},children:[e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"UC-ID"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"JIRA Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Sync Status"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Last Synced"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},align:"right",children:"Actions"})]})}),e.jsx(s.TableBody,{children:A.map(n=>{var b;const i=typeof n.data=="string"?JSON.parse(n.data):n.data;return e.jsxs(s.TableRow,{hover:!0,children:[e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:n.uc_id}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:(i==null?void 0:i.label)||((b=i==null?void 0:i.attributes)==null?void 0:b.Name)||"-"}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:(i==null?void 0:i.objectKey)||"-"}),e.jsx(s.TableCell,{children:E(n.sync_status)}),e.jsx(s.TableCell,{sx:{fontSize:"12px",color:"#667085"},children:P(n.last_synced_at)}),e.jsxs(s.TableCell,{align:"right",children:[e.jsx(s.Tooltip,{title:"View Details",children:e.jsx(s.IconButton,{size:"small",onClick:()=>te(n),children:e.jsx(_e,{size:16})})}),e.jsx(s.Tooltip,{title:"Delete",children:e.jsx(s.IconButton,{size:"small",onClick:()=>ee(n),color:"error",children:e.jsx(de,{size:16})})})]})]},n.id)})})]})}),e.jsxs(s.Dialog,{open:D,onClose:()=>w(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(s.DialogTitle,{children:e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s.Typography,{variant:"h6",children:"Import AI Systems from JIRA"}),e.jsx(s.IconButton,{onClick:()=>w(!1),children:e.jsx(fe,{size:20})})]})}),e.jsx(s.DialogContent,{dividers:!0,children:oe?e.jsxs(s.Box,{sx:{py:4,textAlign:"center"},children:[e.jsx(s.CircularProgress,{}),e.jsx(s.Typography,{sx:{mt:2},children:"Loading objects from JIRA..."})]}):f.length===0?e.jsx(s.Alert,{severity:"info",children:"No new objects to import. All JIRA objects have already been imported."}):e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s.FormControlLabel,{control:e.jsx(s.Checkbox,{checked:_.size===f.length&&f.length>0,indeterminate:_.size>0&&_.size<f.length,onChange:Q,size:"small"}),label:e.jsxs(s.Typography,{variant:"body2",fontSize:13,children:["Select All (",f.length," objects)"]})}),e.jsxs(s.Typography,{variant:"body2",color:"text.secondary",children:[_.size," selected"]})]}),e.jsx(s.TableContainer,{sx:{maxHeight:400},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{padding:"checkbox"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Updated"})]})}),e.jsx(s.TableBody,{children:f.map(n=>e.jsxs(s.TableRow,{hover:!0,selected:_.has(n.id),onClick:()=>W(n.id),sx:{cursor:"pointer"},children:[e.jsx(s.TableCell,{padding:"checkbox",children:e.jsx(s.Checkbox,{checked:_.has(n.id),size:"small"})}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:n.key}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:n.name}),e.jsx(s.TableCell,{sx:{fontSize:"12px",color:"#667085"},children:P(n.updated)})]},n.id))})]})})]})}),e.jsxs(s.DialogActions,{sx:{p:2},children:[e.jsx(s.Button,{onClick:()=>w(!1),sx:{textTransform:"none"},children:"Cancel"}),e.jsx(s.Button,{variant:"contained",onClick:m,disabled:N||_.size===0,startIcon:N?e.jsx(s.CircularProgress,{size:16}):e.jsx(ke,{size:16}),sx:{backgroundColor:"#13715B",textTransform:"none","&:hover":{backgroundColor:"#0f5a47"}},children:N?"Importing...":`Import ${_.size} Objects`})]})]}),e.jsx(s.Drawer,{anchor:"right",open:ne,onClose:()=>X(!1),children:e.jsx(s.Box,{sx:{width:480,p:3},children:I&&(()=>{var B;const n=typeof I.data=="string"?JSON.parse(I.data):I.data,i=(n==null?void 0:n.label)||((B=n==null?void 0:n.attributes)==null?void 0:B.Name)||I.uc_id,b=(n==null?void 0:n.objectKey)||"-";return e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"h6",children:i}),e.jsxs(s.Typography,{variant:"body2",color:"text.secondary",sx:{fontFamily:"monospace"},children:[I.uc_id," | ",b]})]}),e.jsx(s.IconButton,{onClick:()=>X(!1),children:e.jsx(fe,{size:20})})]}),e.jsxs(s.Stack,{spacing:2,children:[e.jsx(s.Box,{sx:{display:"flex",gap:1},children:E(I.sync_status)}),e.jsx(s.Divider,{}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"Sync Information"}),e.jsxs(s.Stack,{spacing:1,children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"Last Synced"}),e.jsx(s.Typography,{variant:"body2",children:P(I.last_synced_at)})]}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"JIRA Created"}),e.jsx(s.Typography,{variant:"body2",children:P(n==null?void 0:n.created)})]}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"JIRA Updated"}),e.jsx(s.Typography,{variant:"body2",children:P(n==null?void 0:n.updated)})]})]})]}),e.jsx(s.Divider,{}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"JIRA Attributes"}),e.jsx(s.Stack,{spacing:1,children:Object.entries((n==null?void 0:n.attributes)||{}).map(([g,O])=>e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:g}),e.jsx(s.Typography,{variant:"body2",sx:{wordBreak:"break-word"},children:Array.isArray(O)?O.join(", "):String(O??"N/A")})]},g))})]}),e.jsx(s.Divider,{}),e.jsx(s.Box,{sx:{display:"flex",gap:2},children:e.jsx(s.Button,{variant:"outlined",color:"error",fullWidth:!0,onClick:()=>ee(I),startIcon:e.jsx(de,{size:16}),sx:{textTransform:"none"},children:"Delete"})})]})]})})()})})]})},be=c=>{if(!c)return"-";try{return new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return c}},h={block:{borderRadius:2,backgroundColor:"#FAFAFA",minWidth:228,width:"100%",padding:"8px 36px 14px 14px"},title:{fontSize:12,color:"#8594AC",pb:"2px"},value:{fontSize:16,fontWeight:600,color:"#2D3748"},sectionTitle:{color:"#1A1919",fontWeight:600,mb:"10px",fontSize:16}},ve=({project:c})=>{var z;if(!c)return e.jsx(s.Typography,{children:"No JIRA use case found"});const d=c._jira_data,y=(d==null?void 0:d.attributes)||{},a=y["Description / Purpose"]||y.Description||y.Purpose||"-",A=y["Risk Level / Criticality"]||"-",j=y["Lifecycle Status"]||"-",S=y["Primary Function"]||"-";return e.jsxs(s.Stack,{sx:{width:"100%"},children:[e.jsx(s.Box,{sx:{mb:3},children:e.jsx(s.Chip,{icon:e.jsx(ye,{size:14}),label:"Imported from JIRA Assets",size:"small",sx:{backgroundColor:"#E3F2FD",color:"#1565C0","& .MuiChip-icon":{color:"#1565C0"}}})}),e.jsxs(s.Stack,{direction:"row",spacing:18,sx:{pb:"31px"},children:[e.jsxs(s.Stack,{sx:h.block,children:[e.jsx(s.Typography,{sx:h.title,children:"JIRA Object Key"}),e.jsx(s.Typography,{sx:h.value,children:(d==null?void 0:d.objectKey)||"-"})]}),e.jsxs(s.Stack,{sx:h.block,children:[e.jsx(s.Typography,{sx:h.title,children:"Object Type"}),e.jsx(s.Typography,{sx:h.value,children:((z=d==null?void 0:d.objectType)==null?void 0:z.name)||"-"})]}),e.jsxs(s.Stack,{sx:h.block,children:[e.jsx(s.Typography,{sx:h.title,children:"Sync Status"}),e.jsx(s.Typography,{sx:{...h.value,textTransform:"capitalize"},children:c._sync_status||"synced"})]})]}),e.jsxs(s.Stack,{direction:"row",spacing:18,sx:{pb:"31px"},children:[e.jsxs(s.Stack,{sx:h.block,children:[e.jsx(s.Typography,{sx:h.title,children:"Created in JIRA"}),e.jsx(s.Typography,{sx:h.value,children:be(d==null?void 0:d.created)})]}),e.jsxs(s.Stack,{sx:h.block,children:[e.jsx(s.Typography,{sx:h.title,children:"Last Updated in JIRA"}),e.jsx(s.Typography,{sx:h.value,children:be(d==null?void 0:d.updated)})]}),e.jsx(s.Stack,{sx:{minWidth:228,width:"100%",p:"8px 36px 14px 14px"}})]}),e.jsxs(s.Stack,{sx:{mb:4},children:[e.jsx(s.Typography,{sx:h.sectionTitle,children:"Key Attributes"}),e.jsxs(s.Stack,{direction:"row",spacing:18,sx:{pb:"16px"},children:[e.jsxs(s.Stack,{sx:h.block,children:[e.jsx(s.Typography,{sx:h.title,children:"Risk Level / Criticality"}),e.jsx(s.Typography,{sx:h.value,children:A})]}),e.jsxs(s.Stack,{sx:h.block,children:[e.jsx(s.Typography,{sx:h.title,children:"Lifecycle Status"}),e.jsx(s.Typography,{sx:h.value,children:j})]}),e.jsxs(s.Stack,{sx:h.block,children:[e.jsx(s.Typography,{sx:h.title,children:"Primary Function"}),e.jsx(s.Typography,{sx:h.value,children:S})]})]})]}),e.jsxs(s.Stack,{sx:{mb:4},children:[e.jsx(s.Typography,{sx:h.sectionTitle,children:"Description / Purpose"}),e.jsx(s.Box,{sx:{...h.block,maxWidth:"100%",minHeight:80},children:e.jsx(s.Typography,{sx:{fontSize:14,color:"#2D3748",lineHeight:1.6},children:a})})]})]})},ge=c=>{if(!c)return"-";try{return new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return c}},Ae=c=>c==null?"-":typeof c=="boolean"?c?"Yes":"No":Array.isArray(c)?c.join(", ")||"-":typeof c=="object"?JSON.stringify(c):String(c)||"-",K={sectionTitle:{color:"#1A1919",fontWeight:600,mb:2,fontSize:16},label:{fontSize:13,fontWeight:500,color:"#344054",mb:.5},fieldContainer:{mb:2},readOnlyField:{"& .MuiInputBase-root":{backgroundColor:"#F9FAFB"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#E5E7EB"}}},ze=({project:c})=>{var D;const[d,y]=r.useState(["basic","attributes"]);if(!c)return e.jsx(s.Typography,{children:"No JIRA use case found"});const a=c._jira_data,A=(a==null?void 0:a.attributes)||{},j=w=>{y(f=>f.includes(w)?f.filter(U=>U!==w):[...f,w])},S=["System Name / Identifier","Name","Description / Purpose","Description","Purpose"],z=["Business Owner / Responsible Team","Technical Owner / Maintainer","AI Officer","Model Owner / Maintainer","Risk Owner","Vendor / Developer Name (if third-party)"],C=["Lifecycle Status","Primary Function","Use Case / Business Process Supported","User Groups / Stakeholders","Decision Type","AI Function Type"],T=["Risk Level / Criticality","Potential Harms or Impacts","Known Limitations","Applicable Regulations"],t=["Input Data Sources & Types","Contains Personal / Sensitive Data","Deployment Environment","Platform / Tooling","Model Type / Algorithm & Version","Key Performance Metrics","Explainability Method","Human Oversight Mechanisms"],L=Object.keys(A).filter(w=>![...S,...z,...C,...T,...t].includes(w)),u=(w,f)=>e.jsxs(s.Box,{sx:K.fieldContainer,children:[e.jsx(s.InputLabel,{sx:K.label,children:w}),e.jsx(s.TextField,{fullWidth:!0,size:"small",value:Ae(f),InputProps:{readOnly:!0},sx:K.readOnlyField,multiline:String(f||"").length>100,rows:String(f||"").length>100?3:1})]},w),k=(w,f)=>{const U=f.filter(_=>A[_]!==void 0);return U.length===0?null:e.jsxs(s.Box,{sx:{mb:3},children:[e.jsx(s.Typography,{sx:{fontSize:14,fontWeight:600,color:"#475467",mb:2},children:w}),e.jsx(s.Stack,{direction:"row",flexWrap:"wrap",gap:2,children:U.map(_=>e.jsx(s.Box,{sx:{minWidth:280,flex:"1 1 280px",maxWidth:"calc(50% - 8px)"},children:u(_,A[_])},_))})]})};return e.jsxs(s.Stack,{sx:{width:"100%",maxWidth:1200},children:[e.jsxs(s.Box,{sx:{mb:3,display:"flex",gap:2,alignItems:"center"},children:[e.jsx(s.Chip,{icon:e.jsx(ye,{size:14}),label:"JIRA Assets Object",size:"small",sx:{backgroundColor:"#E3F2FD",color:"#1565C0","& .MuiChip-icon":{color:"#1565C0"}}}),e.jsx(s.Typography,{sx:{fontSize:13,color:"#6B7280"},children:"This use case is imported from JIRA and is read-only"})]}),e.jsxs(s.Accordion,{expanded:d.includes("basic"),onChange:()=>j("basic"),sx:{mb:2,boxShadow:"none",border:"1px solid #E5E7EB",borderRadius:"8px !important"},children:[e.jsx(s.AccordionSummary,{expandIcon:e.jsx(re,{size:20}),children:e.jsx(s.Typography,{sx:K.sectionTitle,children:"Basic Information"})}),e.jsx(s.AccordionDetails,{children:e.jsxs(s.Stack,{direction:"row",flexWrap:"wrap",gap:2,children:[e.jsx(s.Box,{sx:{minWidth:280,flex:"1 1 280px"},children:u("Use Case ID",c.uc_id)}),e.jsx(s.Box,{sx:{minWidth:280,flex:"1 1 280px"},children:u("Name",c.project_title)}),e.jsx(s.Box,{sx:{minWidth:280,flex:"1 1 280px"},children:u("JIRA Object Key",a==null?void 0:a.objectKey)}),e.jsx(s.Box,{sx:{minWidth:280,flex:"1 1 280px"},children:u("Object Type",(D=a==null?void 0:a.objectType)==null?void 0:D.name)}),e.jsx(s.Box,{sx:{minWidth:280,flex:"1 1 280px"},children:u("Created in JIRA",ge(a==null?void 0:a.created))}),e.jsx(s.Box,{sx:{minWidth:280,flex:"1 1 280px"},children:u("Last Updated in JIRA",ge(a==null?void 0:a.updated))}),e.jsx(s.Box,{sx:{minWidth:280,flex:"1 1 280px"},children:u("Sync Status",c._sync_status||"synced")})]})})]}),e.jsxs(s.Accordion,{expanded:d.includes("attributes"),onChange:()=>j("attributes"),sx:{mb:2,boxShadow:"none",border:"1px solid #E5E7EB",borderRadius:"8px !important"},children:[e.jsx(s.AccordionSummary,{expandIcon:e.jsx(re,{size:20}),children:e.jsxs(s.Typography,{sx:K.sectionTitle,children:["JIRA Attributes (",Object.keys(A).length,")"]})}),e.jsxs(s.AccordionDetails,{children:[k("Identification",S),k("Ownership & Governance",z),k("Classification & Function",C),k("Risk & Compliance",T),k("Technical Details",t),L.length>0&&k("Other Attributes",L),Object.keys(A).length===0&&e.jsx(s.Typography,{sx:{color:"#6B7280",fontStyle:"italic"},children:"No attributes available for this object"})]})]}),e.jsxs(s.Accordion,{expanded:d.includes("raw"),onChange:()=>j("raw"),sx:{boxShadow:"none",border:"1px solid #E5E7EB",borderRadius:"8px !important"},children:[e.jsx(s.AccordionSummary,{expandIcon:e.jsx(re,{size:20}),children:e.jsx(s.Typography,{sx:K.sectionTitle,children:"Raw JIRA Data"})}),e.jsx(s.AccordionDetails,{children:e.jsx(s.TextField,{fullWidth:!0,multiline:!0,rows:15,value:JSON.stringify(a,null,2),InputProps:{readOnly:!0,sx:{fontFamily:"monospace",fontSize:12}},sx:K.readOnlyField})})]})]})},Z=({tabName:c,message:d})=>{const y=`${c} is not available for externally-imported use cases.`;return e.jsxs(s.Stack,{sx:{alignItems:"center",justifyContent:"center",minHeight:300,p:4},children:[e.jsx(s.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:64,height:64,borderRadius:"50%",backgroundColor:"#F3F4F6",mb:2},children:e.jsx(pe,{size:32,color:"#9CA3AF"})}),e.jsx(s.Typography,{sx:{fontSize:16,fontWeight:500,color:"#374151",textAlign:"center",mb:1},children:d||y}),e.jsx(s.Typography,{sx:{fontSize:14,color:"#6B7280",textAlign:"center",maxWidth:400},children:"This use case was imported from JIRA Assets. View the Overview or Settings tab for JIRA object details."})]})},Ie=c=>e.jsx(Z,{...c,tabName:"Risk management"}),je=c=>e.jsx(Z,{...c,tabName:"Model linking"}),Be=c=>e.jsx(Z,{...c,tabName:"Framework management"}),Oe=c=>e.jsx(Z,{...c,tabName:"CE Marking"}),Je=c=>e.jsx(Z,{...c,tabName:"Activity tracking"}),We=c=>e.jsx(Z,{...c,tabName:"Monitoring"});return J.JiraAssetsConfiguration=ue,J.JiraAssetsUseCasesTab=we,J.JiraUseCaseActivity=Je,J.JiraUseCaseCeMarking=Oe,J.JiraUseCaseFrameworks=Be,J.JiraUseCaseModels=je,J.JiraUseCaseMonitoring=We,J.JiraUseCaseOverview=ve,J.JiraUseCaseRisks=Ie,J.JiraUseCaseSettings=ze,Object.defineProperty(J,Symbol.toStringTag,{value:"Module"}),J}({},jsxRuntime,React,MUI);
//# sourceMappingURL=index.esm.js.map
