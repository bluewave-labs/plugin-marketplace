var PluginJiraAssets=function(J,e,c,s){"use strict";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),z=(l,f)=>{const T=c.forwardRef(({color:A="currentColor",size:C=24,strokeWidth:_=2,absoluteStrokeWidth:d,className:r="",children:u,...v},i)=>c.createElement("svg",{ref:i,...Q,width:C,height:C,stroke:A,strokeWidth:d?Number(_)*24/Number(C):_,className:["lucide",`lucide-${Y(l)}`,r].join(" "),...v},[...f.map(([w,g])=>c.createElement(w,g)),...Array.isArray(u)?u:[u]]));return T.displayName=`${l}`,T};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=z("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),G=({pluginApiCall:l,selectedObjectTypeId:f})=>{const[T,A]=c.useState([]),[C,_]=c.useState([]),[d,r]=c.useState({}),[u,v]=c.useState(!1),[i,w]=c.useState(!1),[g,x]=c.useState(null),[W,h]=c.useState(null),I=c.useCallback(async()=>{if(!(!l||!f))try{const t=await l("GET",`/object-types/${f}/attributes`);Array.isArray(t)&&A(t)}catch(t){console.error("Failed to load JIRA attributes:",t)}},[l,f]),k=c.useCallback(async()=>{if(l)try{const t=await l("GET","/vw-attributes");Array.isArray(t)&&_(t)}catch(t){console.error("Failed to load VW attributes:",t)}},[l]),j=c.useCallback(async()=>{if(l)try{const t=await l("GET","/mappings");t&&typeof t=="object"&&r(t)}catch(t){console.error("Failed to load mappings:",t)}},[l]);c.useEffect(()=>{v(!0),Promise.all([k(),j()]).finally(()=>v(!1))},[k,j]),c.useEffect(()=>{f&&I()},[f,I]);const D=(t,y)=>{r(a=>{const O={...a};return y===""?delete O[t]:O[t]=y,O})},B=t=>{r(y=>{const a={...y};return delete a[t],a})},b=async()=>{if(l){w(!0),x(null),h(null);try{const t=await l("POST","/mappings",{mappings:d});t!=null&&t.success?h(t.message||"Mappings saved successfully"):x((t==null?void 0:t.error)||"Failed to save mappings")}catch(t){x(t.message||"Failed to save mappings")}finally{w(!1)}}},M=new Set(Object.values(d));return u?e.jsx(s.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(s.CircularProgress,{size:24})}):f?e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",fontSize:13,sx:{mb:2},children:"Map JIRA attributes to VerifyWise AI System attributes. Mapped attributes will be stored alongside the original JIRA data for compliance and reporting."}),g&&e.jsx(s.Alert,{severity:"error",sx:{mb:2,fontSize:"13px"},onClose:()=>x(null),children:g}),W&&e.jsx(s.Alert,{severity:"success",sx:{mb:2,fontSize:"13px"},onClose:()=>h(null),children:W}),T.length===0?e.jsx(s.Alert,{severity:"warning",sx:{fontSize:"13px"},children:"No JIRA attributes found. Please ensure the object type has attributes defined."}):e.jsxs(e.Fragment,{children:[e.jsx(s.TableContainer,{component:s.Paper,sx:{maxHeight:400,mb:2,boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{sx:{backgroundColor:"#f9fafb"},children:[e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",width:"40%"},children:"JIRA Attribute"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",width:"10%",textAlign:"center"}}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",width:"45%"},children:"VerifyWise Attribute"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px",width:"5%"}})]})}),e.jsx(s.TableBody,{children:T.map(t=>e.jsxs(s.TableRow,{hover:!0,children:[e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:t.name}),e.jsx(s.TableCell,{sx:{textAlign:"center"},children:e.jsx(R,{size:16,color:"#98a2b3"})}),e.jsx(s.TableCell,{children:e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:d[t.name]||"",onChange:y=>D(t.name,y.target.value),displayEmpty:!0,sx:{fontSize:"13px"},children:[e.jsx(s.MenuItem,{value:"",sx:{fontSize:"13px",color:"#98a2b3"},children:"-- Not Mapped --"}),C.map(y=>e.jsxs(s.MenuItem,{value:y.name,sx:{fontSize:"13px"},disabled:M.has(y.name)&&d[t.name]!==y.name,children:[y.name,M.has(y.name)&&d[t.name]!==y.name&&e.jsx(s.Typography,{variant:"caption",color:"text.secondary",sx:{ml:1},children:"(already mapped)"})]},y.name))]})})}),e.jsx(s.TableCell,{children:d[t.name]&&e.jsx(s.Tooltip,{title:"Clear mapping",children:e.jsx(s.IconButton,{size:"small",onClick:()=>B(t.name),children:e.jsx(H,{size:14})})})})]},t.id))})]})}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(s.Typography,{variant:"caption",color:"text.secondary",children:[Object.keys(d).length," of ",T.length," attributes mapped"]}),e.jsx(s.Button,{variant:"contained",onClick:b,disabled:i,startIcon:i?e.jsx(s.CircularProgress,{size:16}):e.jsx(te,{size:16}),sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{backgroundColor:"#0f5a47"},"&:disabled":{backgroundColor:"#d0d5dd"}},children:i?"Saving...":"Save Mappings"})]})]})]}):e.jsx(s.Alert,{severity:"info",sx:{fontSize:"13px"},children:"Please select a Schema and Object Type in Step 2 to configure attribute mappings."})},ce=({configData:l={},onConfigChange:f,onSaveConfiguration:T,onTestConnection:A,isSavingConfig:C=!1,isTestingConnection:_=!1,pluginApiCall:d})=>{const[r,u]=c.useState({sync_enabled:!1,sync_interval_hours:24,...l}),[v,i]=c.useState([]),[w,g]=c.useState([]),[x,W]=c.useState(!1),[h,I]=c.useState(!1),[k,j]=c.useState("idle"),[D,B]=c.useState("");c.useEffect(()=>{u(n=>({...n,...l}))},[l]);const b=c.useCallback((n,S)=>{u(E=>({...E,[n]:S})),f&&f(n,S)},[f]),M=c.useCallback(async()=>{if(!(!d||!r.jira_base_url||!r.workspace_id)){W(!0);try{const n=await d("GET","/schemas");n&&Array.isArray(n)&&i(n)}catch(n){console.error("Failed to load schemas:",n)}finally{W(!1)}}},[d,r.jira_base_url,r.workspace_id]),t=c.useCallback(async n=>{if(!(!d||!n)){I(!0);try{const S=await d("GET",`/schemas/${n}/object-types`);S&&Array.isArray(S)&&g(S)}catch(S){console.error("Failed to load object types:",S)}finally{I(!1)}}},[d]),y=async()=>{if(!d){A&&A();return}j("testing"),B("");try{const n=await d("POST","/test-connection",{jira_base_url:r.jira_base_url,workspace_id:r.workspace_id,email:r.email,api_token:r.api_token});n!=null&&n.success?(j("success"),B(n.message||"Connection successful"),M()):(j("error"),B((n==null?void 0:n.message)||"Connection failed"))}catch(n){j("error"),B(n.message||"Connection test failed")}},a=n=>{b("selected_schema_id",n),b("selected_object_type_id",""),g([]),n&&t(n)};c.useEffect(()=>{r.jira_base_url&&r.workspace_id&&v.length===0&&M()},[r.jira_base_url,r.workspace_id,M,v.length]),c.useEffect(()=>{r.selected_schema_id&&w.length===0&&t(r.selected_schema_id)},[r.selected_schema_id,t,w.length]);const O=[{value:1,label:"Every hour"},{value:6,label:"Every 6 hours"},{value:12,label:"Every 12 hours"},{value:24,label:"Every 24 hours"},{value:48,label:"Every 48 hours"}];return e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",fontSize:13,sx:{mb:3},children:"Connect to your Jira Service Management Assets to import AI Systems as use-cases."}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 1: Connection Settings"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"JIRA Base URL *"}),e.jsx(s.TextField,{fullWidth:!0,placeholder:"https://your-company.atlassian.net",value:r.jira_base_url||"",onChange:n=>b("jira_base_url",n.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Workspace ID *"}),e.jsx(s.TextField,{fullWidth:!0,placeholder:"Enter your JSM Assets workspace ID",value:r.workspace_id||"",onChange:n=>b("workspace_id",n.target.value),size:"small",helperText:"Found in Assets settings or the URL when viewing Assets",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Email *"}),e.jsx(s.TextField,{fullWidth:!0,type:"email",placeholder:"your-email@company.com",value:r.email||"",onChange:n=>b("email",n.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"API Token *"}),e.jsx(s.TextField,{fullWidth:!0,type:"password",placeholder:"Enter your Atlassian API token",value:r.api_token||"",onChange:n=>b("api_token",n.target.value),size:"small",helperText:"Generate at id.atlassian.com/manage-profile/security/api-tokens",sx:{"& .MuiOutlinedInput-root":{fontSize:"13px",backgroundColor:"white"}}})]})]}),k!=="idle"&&e.jsx(s.Box,{sx:{mt:2},children:e.jsx(s.Alert,{severity:k==="success"?"success":k==="error"?"error":"info",sx:{fontSize:"13px"},children:k==="testing"?"Testing connection...":D})}),e.jsx(s.Box,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:e.jsx(s.Button,{variant:"outlined",onClick:y,disabled:_||k==="testing"||!r.jira_base_url||!r.workspace_id||!r.email||!r.api_token,sx:{borderColor:"#13715B",color:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{borderColor:"#0f5a47",backgroundColor:"rgba(19, 113, 91, 0.04)"},"&:disabled":{borderColor:"#d0d5dd",color:"#98a2b3"}},children:_||k==="testing"?e.jsxs(e.Fragment,{children:[e.jsx(s.CircularProgress,{size:16,sx:{mr:1}}),"Testing..."]}):"Test Connection"})}),e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 2: Select Schema & Object Type"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Schema"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:r.selected_schema_id||"",onChange:n=>a(n.target.value),disabled:x||v.length===0,displayEmpty:!0,sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"",sx:{fontSize:"13px"},children:x?"Loading schemas...":"Select a schema"}),v.map(n=>e.jsxs(s.MenuItem,{value:n.id,sx:{fontSize:"13px"},children:[n.name," (",n.objectSchemaKey,")"]},n.id))]})})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Object Type (AI Systems)"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsxs(s.Select,{value:r.selected_object_type_id||"",onChange:n=>b("selected_object_type_id",n.target.value),disabled:h||w.length===0||!r.selected_schema_id,displayEmpty:!0,sx:{fontSize:"13px",backgroundColor:"white"},children:[e.jsx(s.MenuItem,{value:"",sx:{fontSize:"13px"},children:h?"Loading object types...":"Select an object type"}),w.map(n=>e.jsxs(s.MenuItem,{value:n.id,sx:{fontSize:"13px"},children:[n.name,n.objectCount!==void 0&&e.jsx(s.Chip,{label:`${n.objectCount} objects`,size:"small",sx:{ml:1,fontSize:"11px"}})]},n.id))]})})]})]}),e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 3: Sync Settings"}),e.jsxs(s.Stack,{spacing:2.5,children:[e.jsx(s.Box,{children:e.jsx(s.FormControlLabel,{control:e.jsx(s.Switch,{checked:r.sync_enabled||!1,onChange:n=>b("sync_enabled",n.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#13715B"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#13715B"}}}),label:e.jsx(s.Typography,{variant:"body2",fontSize:13,sx:{color:"#344054"},children:"Enable automatic sync"})})}),r.sync_enabled&&e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,fontSize:13,sx:{mb:.75,color:"#344054"},children:"Sync Interval"}),e.jsx(s.FormControl,{fullWidth:!0,size:"small",children:e.jsx(s.Select,{value:r.sync_interval_hours||24,onChange:n=>b("sync_interval_hours",n.target.value),sx:{fontSize:"13px",backgroundColor:"white"},children:O.map(n=>e.jsx(s.MenuItem,{value:n.value,sx:{fontSize:"13px"},children:n.label},n.value))})})]})]}),r.last_sync_at&&e.jsx(s.Box,{sx:{mt:2},children:e.jsxs(s.Alert,{severity:r.last_sync_status==="success"?"success":"warning",sx:{fontSize:"13px"},children:["Last sync: ",new Date(r.last_sync_at).toLocaleString()," -"," ",r.last_sync_status==="success"?"Successful":r.last_sync_message]})}),e.jsx(s.Divider,{sx:{my:3}}),e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:2,color:"#344054"},children:"Step 4: Attribute Mapping (Optional)"}),e.jsx(G,{pluginApiCall:d,selectedObjectTypeId:r.selected_object_type_id}),e.jsx(s.Box,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:T&&e.jsx(s.Button,{variant:"contained",onClick:T,disabled:C||!r.jira_base_url||!r.workspace_id||!r.email||!r.api_token,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px",fontWeight:500,"&:hover":{backgroundColor:"#0f5a47"},"&:disabled":{backgroundColor:"#d0d5dd"}},children:C?e.jsxs(e.Fragment,{children:[e.jsx(s.CircularProgress,{size:16,sx:{mr:1,color:"white"}}),"Saving..."]}):"Save Configuration"})})]})},le=({pluginApiCall:l})=>{const[f,T]=c.useState([]),[A,C]=c.useState(!0),[_,d]=c.useState(!1),[r,u]=c.useState(null),[v,i]=c.useState(null),[w,g]=c.useState(!1),[x,W]=c.useState([]),[h,I]=c.useState(new Set),[k,j]=c.useState("non-organizational"),[D,B]=c.useState(!1),[b,M]=c.useState(!1),[t,y]=c.useState(null),[a,O]=c.useState(null),[n,S]=c.useState(!1),E=c.useCallback(async()=>{if(l){C(!0),i(null);try{const o=await l("GET","/use-cases");Array.isArray(o)&&T(o)}catch(o){i(o.message||"Failed to load use cases")}finally{C(!1)}}},[l]),U=c.useCallback(async()=>{if(l)try{const o=await l("GET","/sync/status");u(o)}catch(o){console.error("Failed to load sync status:",o)}},[l]);c.useEffect(()=>{E(),U()},[E,U]);const ae=async()=>{if(l){d(!0),i(null);try{const o=await l("POST","/sync");o!=null&&o.success?(await E(),await U()):i((o==null?void 0:o.status)||"Sync failed")}catch(o){i(o.message||"Sync failed")}finally{d(!1)}}},de=async()=>{if(l){g(!0),B(!0),I(new Set),W([]);try{const o=await l("GET","/org-project");y(o);const p=await l("GET","/config"),F=p==null?void 0:p.selected_object_type_id;if(!F){i("No object type configured. Please configure the plugin first."),B(!1);return}const X=await l("GET",`/object-types/${F}/objects`);if(Array.isArray(X)){const fe=new Set(f.map($=>$.jira_object_id)),xe=X.filter($=>!fe.has($.id));W(xe)}}catch(o){i(o.message||"Failed to load JIRA objects")}finally{B(!1)}}},ie=o=>{I(p=>{const F=new Set(p);return F.has(o)?F.delete(o):F.add(o),F})},he=()=>{h.size===x.length?I(new Set):I(new Set(x.map(o=>o.id)))},ye=async()=>{if(!(!l||h.size===0)){M(!0),i(null);try{const o=await l("POST","/import",{object_ids:Array.from(h),is_organizational:k==="organizational"});o!=null&&o.success?(g(!1),await E()):i((o==null?void 0:o.error)||"Import failed")}catch(o){i(o.message||"Import failed")}finally{M(!1)}}},pe=o=>{O(o),S(!0)},q=async o=>{if(l)try{await l("PATCH",`/use-cases/${o.id}`,{is_organizational:!o.is_organizational}),await E()}catch(p){i(p.message||"Failed to update use case")}},K=async o=>{if(l&&window.confirm(`Are you sure you want to delete "${o.name}"?`))try{await l("DELETE",`/use-cases/${o.id}`),await E(),(a==null?void 0:a.id)===o.id&&(S(!1),O(null))}catch(p){i(p.message||"Failed to delete use case")}},L=o=>o?new Date(o).toLocaleString():"N/A",Z=o=>{switch(o){case"synced":return e.jsx(s.Chip,{label:"Synced",size:"small",color:"success",sx:{fontSize:"11px"}});case"updated":return e.jsx(s.Chip,{label:"Updated",size:"small",color:"info",sx:{fontSize:"11px"}});case"deleted_in_jira":return e.jsx(s.Chip,{label:"Deleted in JIRA",size:"small",color:"error",sx:{fontSize:"11px"}});default:return e.jsx(s.Chip,{label:o,size:"small",sx:{fontSize:"11px"}})}};return e.jsxs(s.Box,{sx:{p:3},children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"h6",fontWeight:600,children:"JIRA AI Systems"}),e.jsx(s.Typography,{variant:"body2",color:"text.secondary",fontSize:13,children:"AI Systems imported from Jira Service Management Assets"})]}),e.jsxs(s.Box,{sx:{display:"flex",gap:2},children:[e.jsx(s.Button,{variant:"outlined",startIcon:_?e.jsx(s.CircularProgress,{size:16}):e.jsx(re,{size:16}),onClick:ae,disabled:_,sx:{borderColor:"#d0d5dd",color:"#344054",textTransform:"none",fontSize:"13px"},children:_?"Syncing...":"Sync Now"}),e.jsx(s.Button,{variant:"contained",startIcon:e.jsx(oe,{size:16}),onClick:de,sx:{backgroundColor:"#13715B",textTransform:"none",fontSize:"13px","&:hover":{backgroundColor:"#0f5a47"}},children:"Import from JIRA"})]})]}),r&&e.jsx(s.Alert,{severity:r.last_sync_status==="success"?"success":r.last_sync_status==="failed"?"warning":"info",sx:{mb:2,fontSize:"13px"},icon:e.jsx(se,{size:18}),children:e.jsxs(s.Box,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs("span",{children:["Last sync: ",r.last_sync_at?L(r.last_sync_at):"Never"]}),r.sync_enabled&&e.jsx(s.Chip,{label:`Auto-sync: Every ${r.sync_interval_hours}h`,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"11px"}})]})}),v&&e.jsx(s.Alert,{severity:"error",sx:{mb:2,fontSize:"13px"},onClose:()=>i(null),children:v}),A?e.jsx(s.Box,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(s.CircularProgress,{})}):f.length===0?e.jsxs(s.Paper,{sx:{p:4,textAlign:"center"},children:[e.jsx(m,{size:48,color:"#98a2b3"}),e.jsx(s.Typography,{variant:"h6",sx:{mt:2,color:"#344054"},children:"No JIRA AI Systems Imported"}),e.jsx(s.Typography,{variant:"body2",color:"text.secondary",sx:{mt:1},children:'Click "Import from JIRA" to start importing AI Systems from your JSM Assets.'})]}):e.jsx(s.TableContainer,{component:s.Paper,sx:{boxShadow:"none",border:"1px solid #e4e7ec"},children:e.jsxs(s.Table,{size:"small",children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{sx:{backgroundColor:"#f9fafb"},children:[e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"UC-ID"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"JIRA Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Type"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Sync Status"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Last Synced"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},align:"right",children:"Actions"})]})}),e.jsx(s.TableBody,{children:f.map(o=>e.jsxs(s.TableRow,{hover:!0,children:[e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:o.uc_id}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:o.name}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:o.jira_object_key}),e.jsx(s.TableCell,{children:e.jsx(s.Chip,{icon:o.is_organizational?e.jsx(P,{size:14}):e.jsx(N,{size:14}),label:o.is_organizational?"Organizational":"Non-Org",size:"small",color:o.is_organizational?"primary":"default",variant:"outlined",sx:{fontSize:"11px"}})}),e.jsx(s.TableCell,{children:Z(o.sync_status)}),e.jsx(s.TableCell,{sx:{fontSize:"12px",color:"#667085"},children:L(o.last_synced_at)}),e.jsxs(s.TableCell,{align:"right",children:[e.jsx(s.Tooltip,{title:"View Details",children:e.jsx(s.IconButton,{size:"small",onClick:()=>pe(o),children:e.jsx(ne,{size:16})})}),e.jsx(s.Tooltip,{title:o.is_organizational?"Make Non-Organizational":"Make Organizational",children:e.jsx(s.IconButton,{size:"small",onClick:()=>q(o),children:o.is_organizational?e.jsx(N,{size:16}):e.jsx(P,{size:16})})}),e.jsx(s.Tooltip,{title:"Delete",children:e.jsx(s.IconButton,{size:"small",onClick:()=>K(o),color:"error",children:e.jsx(V,{size:16})})})]})]},o.id))})]})}),e.jsxs(s.Dialog,{open:w,onClose:()=>g(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(s.DialogTitle,{children:e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s.Typography,{variant:"h6",children:"Import AI Systems from JIRA"}),e.jsx(s.IconButton,{onClick:()=>g(!1),children:e.jsx(H,{size:20})})]})}),e.jsx(s.DialogContent,{dividers:!0,children:D?e.jsxs(s.Box,{sx:{py:4,textAlign:"center"},children:[e.jsx(s.CircularProgress,{}),e.jsx(s.Typography,{sx:{mt:2},children:"Loading objects from JIRA..."})]}):x.length===0?e.jsx(s.Alert,{severity:"info",children:"No new objects to import. All JIRA objects have already been imported."}):e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{sx:{mb:3},children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"Import Type"}),e.jsxs(s.RadioGroup,{value:k,onChange:o=>j(o.target.value),children:[e.jsx(s.FormControlLabel,{value:"non-organizational",control:e.jsx(s.Radio,{size:"small"}),label:e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,children:"Non-Organizational"}),e.jsx(s.Typography,{variant:"caption",color:"text.secondary",children:"Standalone use-cases with their own UC-IDs"})]})}),e.jsx(s.FormControlLabel,{value:"organizational",control:e.jsx(s.Radio,{size:"small"}),disabled:!t,label:e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"body2",fontWeight:500,children:"Organizational"}),e.jsx(s.Typography,{variant:"caption",color:"text.secondary",children:t?`Links to organizational project: ${t.title}`:"No organizational project exists - create one first"})]})})]})]}),e.jsx(s.Divider,{sx:{my:2}}),e.jsxs(s.Box,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(s.FormControlLabel,{control:e.jsx(s.Checkbox,{checked:h.size===x.length&&x.length>0,indeterminate:h.size>0&&h.size<x.length,onChange:he,size:"small"}),label:e.jsxs(s.Typography,{variant:"body2",fontSize:13,children:["Select All (",x.length," objects)"]})}),e.jsxs(s.Typography,{variant:"body2",color:"text.secondary",children:[h.size," selected"]})]}),e.jsx(s.TableContainer,{sx:{maxHeight:400},children:e.jsxs(s.Table,{size:"small",stickyHeader:!0,children:[e.jsx(s.TableHead,{children:e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{padding:"checkbox"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Key"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Name"}),e.jsx(s.TableCell,{sx:{fontWeight:600,fontSize:"12px"},children:"Updated"})]})}),e.jsx(s.TableBody,{children:x.map(o=>e.jsxs(s.TableRow,{hover:!0,selected:h.has(o.id),onClick:()=>ie(o.id),sx:{cursor:"pointer"},children:[e.jsx(s.TableCell,{padding:"checkbox",children:e.jsx(s.Checkbox,{checked:h.has(o.id),size:"small"})}),e.jsx(s.TableCell,{sx:{fontSize:"13px",fontFamily:"monospace"},children:o.key}),e.jsx(s.TableCell,{sx:{fontSize:"13px"},children:o.name}),e.jsx(s.TableCell,{sx:{fontSize:"12px",color:"#667085"},children:L(o.updated)})]},o.id))})]})})]})}),e.jsxs(s.DialogActions,{sx:{p:2},children:[e.jsx(s.Button,{onClick:()=>g(!1),sx:{textTransform:"none"},children:"Cancel"}),e.jsx(s.Button,{variant:"contained",onClick:ye,disabled:b||h.size===0,startIcon:b?e.jsx(s.CircularProgress,{size:16}):e.jsx(ee,{size:16}),sx:{backgroundColor:"#13715B",textTransform:"none","&:hover":{backgroundColor:"#0f5a47"}},children:b?"Importing...":`Import ${h.size} Objects`})]})]}),e.jsx(s.Drawer,{anchor:"right",open:n,onClose:()=>S(!1),children:e.jsx(s.Box,{sx:{width:480,p:3},children:a&&e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"h6",children:a.name}),e.jsxs(s.Typography,{variant:"body2",color:"text.secondary",sx:{fontFamily:"monospace"},children:[a.uc_id," | ",a.jira_object_key]})]}),e.jsx(s.IconButton,{onClick:()=>S(!1),children:e.jsx(H,{size:20})})]}),e.jsxs(s.Stack,{spacing:2,children:[e.jsxs(s.Box,{sx:{display:"flex",gap:1},children:[e.jsx(s.Chip,{icon:a.is_organizational?e.jsx(P,{size:14}):e.jsx(N,{size:14}),label:a.is_organizational?"Organizational":"Non-Organizational",size:"small",color:a.is_organizational?"primary":"default"}),Z(a.sync_status)]}),e.jsx(s.Divider,{}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"Sync Information"}),e.jsxs(s.Stack,{spacing:1,children:[e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"Last Synced"}),e.jsx(s.Typography,{variant:"body2",children:L(a.last_synced_at)})]}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"JIRA Created"}),e.jsx(s.Typography,{variant:"body2",children:L(a.jira_created_at)})]}),e.jsxs(s.Box,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(s.Typography,{variant:"body2",color:"text.secondary",children:"JIRA Updated"}),e.jsx(s.Typography,{variant:"body2",children:L(a.jira_updated_at)})]})]})]}),e.jsx(s.Divider,{}),a.mapped_attributes&&Object.keys(a.mapped_attributes).length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1,color:"#13715B"},children:"VerifyWise AI System Attributes"}),e.jsx(s.Stack,{spacing:1,children:Object.entries(a.mapped_attributes).map(([o,p])=>e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:o}),e.jsx(s.Typography,{variant:"body2",sx:{wordBreak:"break-word"},children:Array.isArray(p)?p.join(", "):String(p??"N/A")})]},o))})]}),e.jsx(s.Divider,{})]}),e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"JIRA Attributes (Raw)"}),e.jsx(s.Stack,{spacing:1,children:Object.entries(a.attributes||{}).map(([o,p])=>e.jsxs(s.Box,{children:[e.jsx(s.Typography,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:o}),e.jsx(s.Typography,{variant:"body2",sx:{wordBreak:"break-word"},children:Array.isArray(p)?p.join(", "):String(p??"N/A")})]},o))})]}),e.jsx(s.Divider,{}),e.jsxs(s.Box,{sx:{display:"flex",gap:2},children:[e.jsx(s.Button,{variant:"outlined",fullWidth:!0,onClick:()=>q(a),startIcon:a.is_organizational?e.jsx(N,{size:16}):e.jsx(P,{size:16}),sx:{textTransform:"none"},children:a.is_organizational?"Make Non-Org":"Make Organizational"}),e.jsx(s.Button,{variant:"outlined",color:"error",fullWidth:!0,onClick:()=>K(a),startIcon:e.jsx(V,{size:16}),sx:{textTransform:"none"},children:"Delete"})]})]})]})})})]})};return J.JiraAssetsAttributeMapping=G,J.JiraAssetsConfiguration=ce,J.JiraAssetsUseCasesTab=le,Object.defineProperty(J,Symbol.toStringTag,{value:"Module"}),J}({},jsxRuntime,React,MUI);
//# sourceMappingURL=index.esm.js.map
