var PluginModelLifecycle=function(N,e,s,o,re){"use strict";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var he={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),E=(t,l)=>{const n=s.forwardRef(({color:c="currentColor",size:r=24,strokeWidth:x=2,absoluteStrokeWidth:p,className:f="",children:g,...y},u)=>s.createElement("svg",{ref:u,...he,width:r,height:r,stroke:c,strokeWidth:p?Number(x)*24/Number(r):x,className:["lucide",`lucide-${ge(t)}`,f].join(" "),...y},[...l.map(([h,k])=>s.createElement(h,k)),...Array.isArray(g)?g:[g]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=E("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=E("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=E("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=E("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=E("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=E("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=E("GitCommitVertical",[["path",{d:"M12 3v6",key:"1holv5"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 15v6",key:"a9ows0"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=E("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=E("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=E("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=E("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=E("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=E("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=E("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=E("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Te(t,l,n=!0){const[c,r]=s.useState([]),[x,p]=s.useState(!1),[f,g]=s.useState(null),y=s.useCallback(async()=>{var u;if(!(!t||!n||!l)){p(!0),g(null);try{const h=await l.get(`/plugins/model-lifecycle/models/${t}/lifecycle`),k=((u=h.data)==null?void 0:u.data)||h.data||[];r(Array.isArray(k)?k:[])}catch(h){g(h.message||"Failed to load lifecycle data")}finally{p(!1)}}},[t,n,l]);return s.useEffect(()=>{y()},[y]),{phases:c,loading:x,error:f,refresh:y}}function Ae(t,l,n=!0){const[c,r]=s.useState(null),[x,p]=s.useState(!1),[f,g]=s.useState(null),y=s.useCallback(async()=>{var u;if(!(!t||!n||!l)){p(!0),g(null);try{const h=await l.get(`/plugins/model-lifecycle/models/${t}/lifecycle/progress`);r(((u=h.data)==null?void 0:u.data)||h.data||null)}catch(h){g(h.message||"Failed to load lifecycle progress")}finally{p(!1)}}},[t,n,l]);return s.useEffect(()=>{y()},[y]),{progress:c,loading:x,error:f,refresh:y}}function ve(t,l=!1,n=!0){const[c,r]=s.useState([]),[x,p]=s.useState(!1),[f,g]=s.useState(null),y=s.useCallback(async()=>{var u;if(!(!n||!t)){p(!0),g(null);try{const h=l?"?includeInactive=true":"",k=await t.get(`/plugins/model-lifecycle/config${h}`),F=((u=k.data)==null?void 0:u.data)||k.data||[];r(Array.isArray(F)?F:[])}catch(h){g(h.message||"Failed to load lifecycle config")}finally{p(!1)}}},[l,n,t]);return s.useEffect(()=>{y()},[y]),{phases:c,loading:x,error:f,refresh:y,setPhases:r}}function Ie({phases:t,progress:l,activePhaseId:n,onPhaseSelect:c}){const r=Array.isArray(l==null?void 0:l.phases)?l.phases:[],x=s.useMemo(()=>(Array.isArray(t)?t:[]).map(f=>{var y;const g=r.find(u=>u.phase_id===f.id);return{id:f.id,name:f.name,totalItems:(g==null?void 0:g.total_items)??((y=f.items)==null?void 0:y.length)??0,filledItems:(g==null?void 0:g.filled_items)??0}}),[t,l]),p=s.useCallback(f=>{c(f)},[c]);return e.jsxs(o.Stack,{sx:{width:280,minWidth:280,borderRight:"1px solid #E0E4E9",backgroundColor:"#FCFCFD"},children:[e.jsxs(o.Box,{sx:{px:"20px",py:"16px",borderBottom:"1px solid #E0E4E9"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"13px",color:"#344054",mb:"4px"},children:"Lifecycle Progress"}),e.jsxs(o.Typography,{sx:{fontSize:"12px",color:"#667085"},children:[(l==null?void 0:l.completion_percentage)??0,"% complete",l?` (${l.filled_items}/${l.total_items} items)`:""]})]}),e.jsx(o.Stack,{sx:{py:"8px"},children:x.map((f,g)=>{const y=f.id===n,u=f.totalItems>0&&f.filledItems===f.totalItems,h=f.filledItems>0;return e.jsxs(o.Stack,{direction:"row",alignItems:"center",onClick:()=>p(f.id),sx:{px:"20px",py:"10px",gap:"12px",cursor:"pointer",borderLeft:y?"3px solid #13715B":"3px solid transparent",backgroundColor:y?"rgba(19,113,91,0.06)":"transparent","&:hover":{backgroundColor:y?"rgba(19,113,91,0.06)":"#F9FAFB"},transition:"background-color 0.15s ease"},children:[e.jsx(o.Box,{sx:{width:24,height:24,minWidth:24,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:u||y?"#13715B":"#E0E4E9",color:u||y?"#fff":"#667085",fontSize:"11px",fontWeight:600},children:u?e.jsx(Q,{size:14}):g+1}),e.jsxs(o.Stack,{sx:{flex:1,minWidth:0},children:[e.jsx(o.Typography,{sx:{fontSize:"13px",fontWeight:y?600:400,color:"#344054",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f.name}),e.jsxs(o.Typography,{sx:{fontSize:"11px",color:h?"#475467":"#667085"},children:[f.filledItems,"/",f.totalItems," items"]})]})]},f.id)})})]})}const b={primary:"#13715B",textSecondary:"#344054",textTertiary:"#475467",textAccent:"#838c99",bgMain:"#FFFFFF",bgAccent:"#f9fafb",borderLight:"#eaecf0",borderDark:"#d0d5dd",error:"#f04438",errorBg:"#FEE2E2",success:"#17b26a",successBg:"#ecfdf3"},$={fontFamily:"'Inter', system-ui, -apple-system, sans-serif"},G={"& .MuiInputBase-root":{fontFamily:$.fontFamily,fontSize:"13px",borderRadius:"4px"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:b.borderDark},"&:hover fieldset":{borderColor:b.primary},"&.Mui-focused fieldset":{borderColor:b.primary}}},R={textTransform:"none",fontWeight:500,fontSize:"13px",fontFamily:$.fontFamily,borderRadius:"4px",borderColor:b.borderDark,color:b.textSecondary,"&:hover":{borderColor:b.primary,color:b.primary,backgroundColor:"rgba(19, 113, 91, 0.04)"}},de={fontFamily:$.fontFamily,fontSize:"12px",fontWeight:500,borderRadius:"4px"};function ie({modelId:t,item:l,onValueChanged:n,apiServices:c}){const r=l.value;switch(l.item_type){case"text":return e.jsx(ae,{modelId:t,item:l,value:r,multiline:!1,onValueChanged:n,apiServices:c});case"textarea":return e.jsx(ae,{modelId:t,item:l,value:r,multiline:!0,onValueChanged:n,apiServices:c});case"documents":return e.jsx(Me,{modelId:t,item:l,value:r,onValueChanged:n,apiServices:c});case"people":return e.jsx(Be,{modelId:t,item:l,value:r,onValueChanged:n,apiServices:c});case"classification":return e.jsx(Pe,{modelId:t,item:l,value:r,onValueChanged:n,apiServices:c});case"checklist":return e.jsx(De,{modelId:t,item:l,value:r,onValueChanged:n,apiServices:c});case"approval":return e.jsx(Ee,{modelId:t,item:l,value:r,onValueChanged:n,apiServices:c});default:return e.jsxs(o.Typography,{color:"text.secondary",variant:"body2",children:["Unsupported field type: ",l.item_type]})}}function ae({modelId:t,item:l,value:n,multiline:c,onValueChanged:r,apiServices:x}){const p=l.config,[f,g]=s.useState((n==null?void 0:n.value_text)??""),[y,u]=s.useState(!1),h=s.useRef((n==null?void 0:n.value_text)??""),k=s.useCallback(async()=>{if(f!==h.current){u(!0);try{await(x==null?void 0:x.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_text:f||null})),h.current=f,r==null||r()}catch{}finally{u(!1)}}},[f,t,l.id,r,x]);return e.jsx(o.TextField,{placeholder:(p==null?void 0:p.placeholder)||`Enter ${l.name.toLowerCase()}`,value:f,onChange:F=>{p!=null&&p.maxLength&&F.target.value.length>p.maxLength||g(F.target.value)},onBlur:k,multiline:c,rows:c?3:void 0,size:"small",fullWidth:!0,sx:G,InputProps:{endAdornment:y?e.jsx(o.CircularProgress,{size:14,sx:{color:b.primary}}):void 0}})}function Me({modelId:t,item:l,value:n,onValueChanged:c,apiServices:r}){const x=Array.isArray(n==null?void 0:n.files)?n.files:[],[p,f]=s.useState(!1),g=s.useRef(null),y=s.useCallback(async h=>{var F,A,M;const k=h.target.files;if(!(!k||k.length===0||!r)){f(!0);try{for(const L of Array.from(k)){const _=new FormData;_.append("file",L),_.append("source","File Manager");const C=await r.post("/files",_,{headers:{"Content-Type":"multipart/form-data"}}),w=((A=(F=C.data)==null?void 0:F.data)==null?void 0:A.id)||((M=C.data)==null?void 0:M.id);await r.post(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}/files`,{fileId:w})}c==null||c()}catch{}finally{f(!1),g.current&&(g.current.value="")}}},[t,l.id,c,r]),u=s.useCallback(async h=>{try{await(r==null?void 0:r.delete(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}/files/${h}`)),c==null||c()}catch{}},[t,l.id,c,r]);return e.jsxs(o.Stack,{sx:{gap:"12px"},children:[x.length>0&&e.jsx(o.Stack,{sx:{gap:"8px"},children:x.map(h=>e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"10px",p:"10px 12px",borderRadius:"4px",border:`1px solid ${b.borderLight}`,backgroundColor:b.bgAccent},children:[e.jsx(be,{size:16,color:b.textAccent}),e.jsx(o.Typography,{sx:{flex:1,fontFamily:$.fontFamily,fontSize:"13px",color:b.textSecondary},children:h.filename||`File #${h.file_id}`}),e.jsx(o.IconButton,{size:"small",onClick:()=>u(h.file_id),"aria-label":"Remove file",sx:{color:b.textAccent,"&:hover":{color:b.error}},children:e.jsx(H,{size:14})})]},h.id))}),e.jsxs(o.Box,{sx:{border:`1px dashed ${b.borderDark}`,borderRadius:"4px",p:"20px 16px",textAlign:"center",cursor:"pointer",transition:"all 0.15s ease","&:hover":{backgroundColor:b.bgAccent,borderColor:b.primary}},onClick:()=>{var h;return(h=g.current)==null?void 0:h.click()},children:[p?e.jsx(o.CircularProgress,{size:20,sx:{color:b.primary}}):e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px",justifyContent:"center",alignItems:"center"},children:[e.jsx(ze,{size:16,color:b.textAccent}),e.jsx(o.Typography,{sx:{fontFamily:$.fontFamily,fontSize:"13px",color:b.textTertiary},children:"Click to upload documents"})]}),e.jsx("input",{ref:g,type:"file",multiple:!0,hidden:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.csv,.txt,.md",onChange:y})]})]})}function Be({modelId:t,item:l,value:n,onValueChanged:c,apiServices:r}){const x=Array.isArray(n==null?void 0:n.value_json)?n.value_json:[],[p,f]=s.useState(""),[g,y]=s.useState(!1),u=s.useCallback(async()=>{const k=parseInt(p);if(!(!k||x.find(F=>F.userId===k))){y(!0);try{const F=[...x,{userId:k}];await(r==null?void 0:r.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_json:F})),f(""),c==null||c()}catch{}finally{y(!1)}}},[p,x,t,l.id,c,r]),h=s.useCallback(async k=>{y(!0);try{const F=x.filter(A=>A.userId!==k);await(r==null?void 0:r.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_json:F})),c==null||c()}catch{}finally{y(!1)}},[x,t,l.id,c,r]);return e.jsxs(o.Stack,{sx:{gap:"10px"},children:[x.length>0&&e.jsx(o.Stack,{direction:"row",flexWrap:"wrap",sx:{gap:"8px"},children:x.map(k=>e.jsx(o.Chip,{label:`User #${k.userId}`,size:"small",variant:"outlined",onDelete:()=>h(k.userId),sx:{...de,borderColor:b.borderDark,color:b.textSecondary,"& .MuiChip-deleteIcon":{color:b.textAccent,"&:hover":{color:b.error}}}},k.userId))}),e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px"},children:[e.jsx(o.TextField,{placeholder:"Enter user ID...",size:"small",value:p,onChange:k=>f(k.target.value),onKeyDown:k=>k.key==="Enter"&&u(),sx:{flex:1,...G}}),e.jsx(o.Button,{variant:"outlined",size:"small",onClick:u,disabled:g||!p,sx:R,children:"Add"})]}),g&&e.jsx(o.CircularProgress,{size:14,sx:{color:b.primary}})]})}function Pe({modelId:t,item:l,value:n,onValueChanged:c,apiServices:r}){var F;const x=l.config,p=Array.isArray(x==null?void 0:x.levels)?x.levels:[],f=((F=n==null?void 0:n.value_json)==null?void 0:F.level)??"",[g,y]=s.useState(f),[u,h]=s.useState(!1),k=s.useCallback(async A=>{y(A),h(!0);try{await(r==null?void 0:r.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_json:{level:A}})),c==null||c()}catch{}finally{h(!1)}},[t,l.id,c,r]);return e.jsxs(o.Stack,{sx:{gap:"8px"},children:[e.jsx(o.RadioGroup,{value:g,onChange:A=>k(A.target.value),children:p.map(A=>e.jsx(o.FormControlLabel,{value:A,control:e.jsx(o.Radio,{size:"small",sx:{color:b.borderDark,"&.Mui-checked":{color:b.primary}}}),label:e.jsx(o.Typography,{sx:{fontFamily:$.fontFamily,fontSize:"13px",color:b.textSecondary},children:A}),sx:{marginLeft:0}},A))}),u&&e.jsx(o.CircularProgress,{size:14,sx:{color:b.primary}})]})}function De({modelId:t,item:l,value:n,onValueChanged:c,apiServices:r}){const x=l.config,f=(Array.isArray(x==null?void 0:x.defaultItems)?x.defaultItems:[]).map(w=>({label:w,checked:!1})),g=Array.isArray(n==null?void 0:n.value_json)?n.value_json:f,[y,u]=s.useState(g.length>0?g:f),[h,k]=s.useState(!1),[F,A]=s.useState(""),M=s.useCallback(async w=>{k(!0);try{await(r==null?void 0:r.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_json:w})),c==null||c()}catch{}finally{k(!1)}},[t,l.id,c,r]),L=s.useCallback(w=>{const T=y.map((D,W)=>W===w?{...D,checked:!D.checked}:D);u(T),M(T)},[y,M]),_=s.useCallback(()=>{if(!F.trim())return;const w=[...y,{label:F.trim(),checked:!1}];u(w),A(""),M(w)},[y,F,M]),C=s.useCallback(w=>{const T=y.filter((D,W)=>W!==w);u(T),M(T)},[y,M]);return e.jsxs(o.Stack,{sx:{gap:"10px"},children:[y.map((w,T)=>e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"10px"},children:[e.jsx(o.Checkbox,{checked:w.checked,onChange:()=>L(T),size:"small",sx:{color:b.borderDark,"&.Mui-checked":{color:b.primary},padding:"4px"}}),e.jsx(o.Typography,{sx:{flex:1,fontFamily:$.fontFamily,fontSize:"13px",textDecoration:w.checked?"line-through":"none",color:w.checked?b.textAccent:b.textSecondary},children:w.label}),e.jsx(o.IconButton,{size:"small",onClick:()=>C(T),"aria-label":"Remove item",sx:{color:b.textAccent,"&:hover":{color:b.error}},children:e.jsx(V,{size:14})})]},T)),e.jsxs(o.Stack,{direction:"row",sx:{gap:"10px"},children:[e.jsx(o.TextField,{placeholder:"Add checklist item...",value:F,onChange:w=>A(w.target.value),onKeyDown:w=>w.key==="Enter"&&_(),size:"small",sx:{flex:1,...G}}),e.jsx(o.Button,{variant:"outlined",size:"small",onClick:_,sx:R,children:"Add"})]}),h&&e.jsx(o.CircularProgress,{size:14,sx:{color:b.primary}})]})}function Ee({modelId:t,item:l,value:n,onValueChanged:c,apiServices:r}){const x=Array.isArray(n==null?void 0:n.value_json)?n.value_json:[],[p,f]=s.useState(x),[g,y]=s.useState(!1),[u,h]=s.useState(""),k=s.useCallback(async C=>{y(!0);try{await(r==null?void 0:r.put(`/plugins/model-lifecycle/models/${t}/lifecycle/items/${l.id}`,{value_json:C})),c==null||c()}catch{}finally{y(!1)}},[t,l.id,c,r]),F=s.useCallback((C,w)=>{const T=p.map(D=>D.userId===C?{...D,status:w,date:new Date().toISOString()}:D);f(T),k(T)},[p,k]),A=s.useCallback(()=>{const C=parseInt(u);if(!C||p.find(T=>T.userId===C))return;const w=[...p,{userId:C,status:"pending"}];f(w),h(""),k(w)},[u,p,k]),M=s.useCallback(C=>{const w=p.filter(T=>T.userId!==C);f(w),k(w)},[p,k]),L=C=>{switch(C){case"approved":return b.success;case"rejected":return b.error;default:return b.textAccent}},_=C=>{switch(C){case"approved":return b.successBg;case"rejected":return b.errorBg;default:return b.bgAccent}};return e.jsxs(o.Stack,{sx:{gap:"12px"},children:[p.map(C=>e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"10px",p:"12px 16px",borderRadius:"4px",border:`1px solid ${b.borderLight}`,backgroundColor:b.bgMain},children:[e.jsxs(o.Typography,{sx:{flex:1,fontFamily:$.fontFamily,fontSize:"13px",color:b.textSecondary},children:["User #",C.userId]}),e.jsx(o.Chip,{label:C.status.charAt(0).toUpperCase()+C.status.slice(1),size:"small",sx:{...de,color:L(C.status),backgroundColor:_(C.status),border:"none"}}),C.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(o.IconButton,{size:"small",onClick:()=>F(C.userId,"approved"),sx:{color:b.success,"&:hover":{backgroundColor:b.successBg}},"aria-label":"Approve",children:e.jsx(Q,{size:16})}),e.jsx(o.IconButton,{size:"small",onClick:()=>F(C.userId,"rejected"),sx:{color:b.error,"&:hover":{backgroundColor:b.errorBg}},"aria-label":"Reject",children:e.jsx(V,{size:16})})]}),e.jsx(o.IconButton,{size:"small",onClick:()=>M(C.userId),sx:{color:b.textAccent,"&:hover":{color:b.error}},"aria-label":"Remove approver",children:e.jsx(H,{size:14})})]},C.userId)),e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px"},children:[e.jsx(o.TextField,{placeholder:"Enter approver user ID...",size:"small",value:u,onChange:C=>h(C.target.value),onKeyDown:C=>C.key==="Enter"&&A(),sx:{flex:1,...G}}),e.jsx(o.Button,{variant:"outlined",size:"small",onClick:A,disabled:g||!u,sx:R,children:"Add Approver"})]}),g&&e.jsx(o.CircularProgress,{size:14,sx:{color:b.primary}})]})}function _e({phase:t,modelId:l,onValueChanged:n,apiServices:c}){const r=Array.isArray(t.items)?t.items:[];return e.jsxs(o.Stack,{sx:{flex:1,overflowY:"auto",p:"24px",gap:"16px"},children:[e.jsxs(o.Stack,{sx:{gap:"4px"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"16px",color:"#344054"},children:t.name}),t.description&&e.jsx(o.Typography,{sx:{fontSize:"13px",color:"#667085"},children:t.description})]}),e.jsx(o.Box,{sx:{borderTop:"1px solid #E0E4E9"}}),r.length>0?e.jsx(o.Stack,{spacing:0,divider:e.jsx(o.Box,{sx:{borderTop:"1px solid #E0E4E9"}}),children:r.map(x=>e.jsxs(o.Stack,{sx:{py:"16px",gap:"10px"},children:[e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"8px"},children:[e.jsx(o.Typography,{sx:{fontWeight:500,color:"#344054",fontSize:"13px"},children:x.name}),x.is_required&&e.jsx(o.Typography,{sx:{color:"#F04438",fontSize:"11px"},children:"Required"})]}),x.description&&e.jsx(o.Typography,{sx:{color:"#667085",display:"block",fontSize:"12px"},children:x.description}),e.jsx(ie,{modelId:l,item:x,onValueChanged:n,apiServices:c})]},x.id))}):e.jsx(o.Typography,{sx:{textAlign:"center",color:"#667085",py:4},children:"No items configured for this phase"})]})}function Le({phases:t,progress:l,modelId:n,loading:c,onValueChanged:r,apiServices:x}){const[p,f]=s.useState(null);s.useEffect(()=>{t.length>0&&p===null&&f(t[0].id)},[t,p]);const g=s.useMemo(()=>t.find(u=>u.id===p)??null,[t,p]),y=s.useCallback(u=>{f(u)},[]);return c&&t.length===0?e.jsx(o.Stack,{alignItems:"center",sx:{py:4},children:e.jsx(o.CircularProgress,{size:24})}):t.length===0?e.jsx(o.Typography,{sx:{textAlign:"center",color:"#667085",py:4},children:"No lifecycle phases configured. Contact an administrator to set up the model lifecycle."}):e.jsxs(o.Box,{sx:{border:"1px solid #E0E4E9",borderRadius:"4px",backgroundColor:"#fff",overflow:"hidden",display:"flex",flexDirection:{xs:"column",md:"row"},minHeight:400},children:[e.jsx(Ie,{phases:t,progress:l,activePhaseId:p,onPhaseSelect:y}),e.jsx(o.Box,{sx:{flex:1,display:"flex",minWidth:0},children:g?e.jsx(_e,{phase:g,modelId:n,onValueChanged:r,apiServices:x}):e.jsx(o.Stack,{alignItems:"center",justifyContent:"center",sx:{flex:1,p:"24px"},children:e.jsx(o.Typography,{sx:{color:"#667085"},children:"Select a phase from the sidebar"})})})]})}function $e({progress:t,onPhaseClick:l}){const n=Array.isArray(t==null?void 0:t.phases)?t.phases:[];if(!t||n.length===0)return null;const c=(r,x)=>x===0?"#E0E4E9":r===x?"#079455":r>0?"#2E90FA":"#E0E4E9";return e.jsxs(o.Stack,{sx:{gap:"12px"},children:[e.jsxs(o.Stack,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"14px",color:"#344054"},children:"Lifecycle Progress"}),e.jsxs(o.Typography,{sx:{fontSize:"13px",color:"#667085"},children:[t.completion_percentage,"% complete (",t.filled_items,"/",t.total_items," items)"]})]}),e.jsx(o.Stack,{direction:"row",sx:{gap:"6px",width:"100%"},children:n.map(r=>{const x=r.total_items>0?r.filled_items/r.total_items*100:0,p=c(r.filled_items,r.total_items);return e.jsx(o.Tooltip,{title:`${r.phase_name}: ${r.filled_items}/${r.total_items} items`,arrow:!0,children:e.jsx(o.Box,{onClick:()=>l==null?void 0:l(r.phase_id),sx:{flex:1,height:8,borderRadius:3,overflow:"hidden",backgroundColor:"#E0E4E9",cursor:l?"pointer":"default","&:hover":l?{opacity:.8}:{},position:"relative"},children:e.jsx(o.Box,{sx:{width:`${x}%`,height:"100%",backgroundColor:p,borderRadius:3,transition:"width 0.3s ease"}})})},r.phase_id)})}),e.jsx(o.Stack,{direction:"row",sx:{gap:"6px",width:"100%"},children:n.map(r=>e.jsx(o.Typography,{sx:{flex:1,textAlign:"center",fontSize:"11px",color:"#667085",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:l?"pointer":"default"},onClick:()=>l==null?void 0:l(r.phase_id),children:r.phase_name},r.phase_id))})]})}function We({phase:t,modelId:l,expanded:n,onToggle:c,onValueChanged:r,apiServices:x}){const p=Array.isArray(t.items)?t.items:[],f=p.length,g=p.filter(h=>{const k=h.value;return k?!!(k.value_text||k.value_json||k.files&&k.files.length>0):!1}).length,u=f>0&&g===f?"#079455":g>0?"#2E90FA":"#667085";return e.jsxs(o.Accordion,{expanded:n,onChange:c,disableGutters:!0,sx:{border:"1px solid #E0E4E9",borderRadius:"4px !important","&:before":{display:"none"},boxShadow:"none",mb:"12px",overflow:"hidden"},children:[e.jsx(o.AccordionSummary,{expandIcon:e.jsx(ne,{size:16,style:{transform:n?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease",color:"#667085"}}),sx:{backgroundColor:n?"#F9FAFB":"#fff","&:hover":{backgroundColor:"#F9FAFB"},px:"16px",py:"12px","& .MuiAccordionSummary-expandIconWrapper":{transform:"none !important"}},children:e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{width:"100%",gap:"12px"},children:[e.jsxs(o.Stack,{sx:{flex:1},children:[e.jsx(o.Typography,{sx:{fontWeight:600,color:"#344054",fontSize:"14px"},children:t.name}),t.description&&e.jsx(o.Typography,{sx:{color:"#667085",fontSize:"12px",mt:"4px"},children:t.description})]}),e.jsx(o.Chip,{label:`${g} / ${f}`,size:"small",variant:"outlined",sx:{color:u,borderColor:u}})]})}),e.jsx(o.AccordionDetails,{sx:{p:0},children:e.jsxs(o.Stack,{spacing:0,divider:e.jsx(o.Box,{sx:{borderTop:"1px solid #E0E4E9"}}),children:[p.map(h=>e.jsxs(o.Stack,{sx:{px:"16px",py:"16px",gap:"10px"},children:[e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"8px"},children:[e.jsx(o.Typography,{sx:{fontWeight:500,color:"#344054",fontSize:"13px"},children:h.name}),h.is_required&&e.jsx(o.Typography,{sx:{color:"#F04438",fontSize:"11px"},children:"Required"})]}),h.description&&e.jsx(o.Typography,{sx:{color:"#667085",display:"block",fontSize:"12px"},children:h.description}),e.jsx(ie,{modelId:l,item:h,onValueChanged:r,apiServices:x})]},h.id)),p.length===0&&e.jsx(o.Typography,{sx:{textAlign:"center",color:"#667085",py:4},children:"No items configured for this phase"})]})})]})}function pe({modelId:t,apiServices:l}){var _;const{phases:n,loading:c,refresh:r}=Te(t,l),{progress:x,refresh:p}=Ae(t,l),[f,g]=s.useState("stepper"),[y,u]=s.useState(()=>new Set),h=s.useRef(new Map),k=s.useCallback(()=>{r(),p()},[r,p]),F=s.useCallback((C,w)=>{w&&g(w)},[]),A=s.useCallback(C=>{u(w=>{const T=new Set(w);return T.has(C)?T.delete(C):T.add(C),T})},[]),M=s.useCallback(C=>{u(T=>{const D=new Set(T);return D.add(C),D});const w=h.current.get(C);w&&w.scrollIntoView({behavior:"smooth",block:"start"})},[]),L=(_=n[0])==null?void 0:_.id;return L!==void 0&&y.size===0&&n.length>0&&u(new Set([L])),e.jsxs(o.Stack,{sx:{gap:"16px"},children:[e.jsx(o.Stack,{direction:"row",justifyContent:"flex-end",children:e.jsxs(o.ToggleButtonGroup,{value:f,exclusive:!0,onChange:F,size:"small",sx:{"& .MuiToggleButton-root":{px:"12px",py:"4px",fontSize:"13px",textTransform:"none",gap:"6px",color:"#667085",borderColor:"#E0E4E9","&.Mui-selected":{backgroundColor:"#F9FAFB",color:"#344054"}}},children:[e.jsxs(o.ToggleButton,{value:"accordion","aria-label":"Accordion view",children:[e.jsx(we,{size:16}),"Accordion"]}),e.jsxs(o.ToggleButton,{value:"stepper","aria-label":"Stepper view",children:[e.jsx(ke,{size:16}),"Stepper"]})]})}),f==="accordion"?e.jsxs(o.Stack,{sx:{gap:"16px"},children:[e.jsx($e,{progress:x,onPhaseClick:M}),n.map(C=>e.jsx("div",{ref:w=>{w?h.current.set(C.id,w):h.current.delete(C.id)},children:e.jsx(We,{phase:C,modelId:t,expanded:y.has(C.id),onToggle:()=>A(C.id),onValueChanged:k,apiServices:l})},C.id))]}):e.jsx(Le,{phases:n,progress:x,modelId:t,loading:c,onValueChanged:k,apiServices:l})]})}const d={primary:"#13715B",primaryDark:"#10614d",textPrimary:"#1c2130",textSecondary:"#344054",textTertiary:"#475467",textAccent:"#838c99",bgMain:"#FFFFFF",bgAlt:"#FCFCFD",bgFill:"#F4F4F4",bgAccent:"#f9fafb",borderLight:"#eaecf0",borderDark:"#d0d5dd",error:"#f04438",errorBg:"#FEE2E2"},I={fontFamily:"'Inter', system-ui, -apple-system, sans-serif"},Y={textTransform:"none",fontWeight:500,fontSize:"13px",fontFamily:I.fontFamily,borderRadius:"4px",backgroundColor:d.primary,color:"#fff","&:hover":{backgroundColor:d.primaryDark}},m={textTransform:"none",fontWeight:400,fontSize:"13px",fontFamily:I.fontFamily,borderRadius:"4px",borderColor:d.borderDark,color:d.textSecondary,"&:hover":{borderColor:d.borderDark,backgroundColor:d.bgFill}},K={"& .MuiOutlinedInput-root":{backgroundColor:d.bgMain,borderRadius:"4px",fontSize:"13px",fontFamily:I.fontFamily,"& .MuiOutlinedInput-notchedOutline":{borderColor:d.borderDark,borderWidth:"1px"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:d.borderDark},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:d.primary,borderWidth:"1px"}}},je={backgroundColor:d.bgMain,borderRadius:"4px",fontSize:"13px",fontFamily:I.fontFamily,"& .MuiOutlinedInput-notchedOutline":{borderColor:d.borderDark},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:d.borderDark},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:d.primary}},Oe={border:`1px solid ${d.borderLight}`,borderRadius:"4px !important","&:before":{display:"none"},boxShadow:"none",overflow:"hidden"},Ne={backgroundColor:d.bgAccent,px:"16px",py:"10px",minHeight:"44px","& .MuiAccordionSummary-expandIconWrapper":{transform:"none !important",order:-1,mr:"10px"},"& .MuiAccordionSummary-content":{margin:0,alignItems:"center",gap:"10px"}},ee={"& .MuiDialog-paper":{borderRadius:"8px",backgroundColor:d.bgAlt}},qe=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"documents",label:"Documents"},{value:"people",label:"People"},{value:"classification",label:"Classification"},{value:"checklist",label:"Checklist"},{value:"approval",label:"Approval"}];function me({apiServices:t}){const{phases:l,loading:n,refresh:c,setPhases:r}=ve(t,!0),[x,p]=s.useState(!1),[f,g]=s.useState(!1),[y,u]=s.useState(""),[h,k]=s.useState(""),[F,A]=s.useState(null),[M,L]=s.useState(""),[_,C]=s.useState("text"),[w,T]=s.useState(!1),[D,W]=s.useState(null),[Z,X]=s.useState(null),[Ge,q]=s.useState(null),[J,oe]=s.useState(""),[xe,Ye]=s.useState(new Set),Ke=s.useCallback(a=>{Ye(v=>{const i=new Set(v);return i.has(a)?i.delete(a):i.add(a),i})},[]),Ze=s.useCallback(async()=>{if(!(!y.trim()||!t)){p(!0);try{await t.post("/plugins/model-lifecycle/phases",{name:y.trim(),description:h.trim()||void 0}),u(""),k(""),c()}catch{}finally{p(!1)}}},[y,h,c,t]),Xe=s.useCallback(async()=>{if(!(D===null||!t)){p(!0);try{await t.delete(`/plugins/model-lifecycle/phases/${D}`),c()}catch{}finally{p(!1),W(null)}}},[D,c,t]),fe=s.useCallback(async(a,v)=>{const i=l.findIndex(U=>U.id===a);if(i<0||!t)return;const S=v==="up"?i-1:i+1;if(S<0||S>=l.length)return;const B=[...l],z=[...l];[z[i],z[S]]=[z[S],z[i]],r(z);const P=z.map(U=>U.id);try{await t.put("/plugins/model-lifecycle/phases/reorder",{orderedIds:P})}catch{r(B)}},[l,r,t]),te=s.useCallback(async(a,v)=>{var B;const i=v.trim();if(!i||!t){q(null);return}const S=((B=l.find(z=>z.id===a))==null?void 0:B.name)??"";if(i===S){q(null);return}r(z=>z.map(P=>P.id===a?{...P,name:i}:P)),q(null);try{await t.put(`/plugins/model-lifecycle/phases/${a}`,{name:i})}catch{r(z=>z.map(P=>P.id===a?{...P,name:S}:P))}},[l,r,t]),Je=s.useCallback(async(a,v)=>{if(t){r(i=>i.map(S=>S.id===a?{...S,is_active:v}:S));try{await t.put(`/plugins/model-lifecycle/phases/${a}`,{is_active:v})}catch{r(i=>i.map(S=>S.id===a?{...S,is_active:!v}:S))}}},[r,t]),Qe=s.useCallback(async a=>{if(!(!M.trim()||!t)){p(!0);try{await t.post(`/plugins/model-lifecycle/phases/${a}/items`,{name:M.trim(),item_type:_,is_required:w}),L(""),C("text"),T(!1),A(null),c()}catch{}finally{p(!1)}}},[M,_,w,c,t]),Ve=s.useCallback(async()=>{if(!(Z===null||!t)){p(!0);try{await t.delete(`/plugins/model-lifecycle/items/${Z}`),c()}catch{}finally{p(!1),X(null)}}},[Z,c,t]),Re=s.useCallback(async(a,v)=>{if(t){r(i=>i.map(S=>{var B;return{...S,items:(B=S.items)==null?void 0:B.map(z=>z.id===a?{...z,is_required:v}:z)}}));try{await t.put(`/plugins/model-lifecycle/items/${a}`,{is_required:v})}catch{r(i=>i.map(S=>{var B;return{...S,items:(B=S.items)==null?void 0:B.map(z=>z.id===a?{...z,is_required:!v}:z)}}))}}},[r,t]),ye=s.useCallback(async(a,v,i,S)=>{const B=v.findIndex(j=>j.id===i);if(B<0||!t)return;const z=S==="up"?B-1:B+1;if(z<0||z>=v.length)return;const P=[...v];[P[B],P[z]]=[P[z],P[B]],r(j=>j.map(O=>O.id===a?{...O,items:P}:O));const U=P.map(j=>j.id);try{await t.put(`/plugins/model-lifecycle/phases/${a}/items/reorder`,{orderedIds:U})}catch{r(j=>j.map(O=>O.id===a?{...O,items:v}:O))}},[r,t]);return e.jsxs(e.Fragment,{children:[e.jsxs(o.Stack,{sx:{gap:"16px"},children:[n?e.jsx(o.Stack,{alignItems:"center",sx:{py:2},children:e.jsx(o.CircularProgress,{size:24,sx:{color:d.primary}})}):l.length===0?e.jsx(o.Typography,{sx:{fontSize:"13px",fontFamily:I.fontFamily,color:d.textTertiary},children:"No lifecycle phases configured yet. Click the button below to add phases."}):e.jsxs(o.Stack,{sx:{gap:"8px"},children:[e.jsxs(o.Typography,{sx:{fontWeight:600,fontSize:"13px",fontFamily:I.fontFamily,color:d.textSecondary},children:["Configured Phases (",l.filter(a=>a.is_active).length," active)"]}),l.map((a,v)=>{var i;return e.jsxs(o.Box,{sx:{display:"flex",alignItems:"center",gap:"12px",py:"8px",px:"12px",backgroundColor:a.is_active?d.bgAccent:d.bgFill,borderRadius:"4px",border:`1px solid ${d.borderLight}`,opacity:a.is_active?1:.6},children:[e.jsxs(o.Typography,{sx:{fontSize:"12px",fontWeight:600,fontFamily:I.fontFamily,color:d.textAccent,minWidth:"20px"},children:[v+1,"."]}),e.jsx(o.Typography,{sx:{flex:1,fontSize:"13px",fontWeight:500,fontFamily:I.fontFamily,color:d.textPrimary},children:a.name}),e.jsx(o.Chip,{label:`${((i=a.items)==null?void 0:i.length)||0} items`,size:"small",sx:{fontSize:"11px",fontFamily:I.fontFamily,height:"20px",backgroundColor:d.bgFill,color:d.textTertiary,borderRadius:"4px"}}),!a.is_active&&e.jsx(o.Chip,{label:"Inactive",size:"small",sx:{fontSize:"11px",fontFamily:I.fontFamily,height:"20px",backgroundColor:d.errorBg,color:d.error,borderRadius:"4px"}})]},a.id)})]}),e.jsx(o.Button,{variant:"outlined",startIcon:e.jsx(Se,{size:16}),onClick:()=>g(!0),sx:{...m,alignSelf:"flex-start"},children:"Configure Phases"})]}),e.jsxs(o.Dialog,{open:f,onClose:()=>g(!1),maxWidth:"md",fullWidth:!0,sx:ee,PaperProps:{sx:{maxHeight:"85vh"}},children:[e.jsxs(o.DialogTitle,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${d.borderLight}`,py:"12px",px:"20px"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"16px",fontFamily:I.fontFamily,color:d.textPrimary},children:"Configure Model Lifecycle"}),e.jsx(o.IconButton,{onClick:()=>g(!1),size:"small","aria-label":"Close",sx:{color:d.textTertiary},children:e.jsx(V,{size:18})})]}),e.jsx(o.DialogContent,{sx:{p:"20px"},children:n&&l.length===0?e.jsx(o.Stack,{alignItems:"center",sx:{py:4},children:e.jsx(o.CircularProgress,{sx:{color:d.primary}})}):e.jsxs(o.Stack,{sx:{gap:"12px"},children:[l.map((a,v)=>e.jsxs(o.Accordion,{expanded:xe.has(a.id),onChange:()=>Ke(a.id),disableGutters:!0,sx:{...Oe,opacity:a.is_active?1:.6},children:[e.jsxs(o.AccordionSummary,{sx:Ne,children:[e.jsx(ne,{size:16,color:d.textTertiary,style:{transform:xe.has(a.id)?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease"}}),Ge===a.id?e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{flex:1,gap:"6px",mr:"8px"},onClick:i=>i.stopPropagation(),children:[e.jsx(o.TextField,{value:J,onChange:i=>oe(i.target.value),onBlur:()=>te(a.id,J),onKeyDown:i=>{i.key==="Enter"?te(a.id,J):i.key==="Escape"&&q(null)},autoFocus:!0,size:"small",sx:{...K,flex:1}}),e.jsx(o.IconButton,{size:"small",onClick:()=>te(a.id,J),"aria-label":"Save phase name",sx:{color:d.primary},children:e.jsx(Q,{size:16})})]}):e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{flex:1,gap:"6px","&:hover .phase-edit-icon":{opacity:1}},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"13px",fontFamily:I.fontFamily,color:d.textPrimary,cursor:"text"},onDoubleClick:i=>{i.stopPropagation(),q(a.id),oe(a.name)},children:a.name}),e.jsx(o.IconButton,{className:"phase-edit-icon",size:"small",sx:{opacity:0,transition:"opacity 0.2s",p:"2px",color:d.textTertiary},onClick:i=>{i.stopPropagation(),q(a.id),oe(a.name)},"aria-label":"Edit phase name",children:e.jsx(Fe,{size:14})})]}),e.jsx(o.FormControlLabel,{control:e.jsx(o.Switch,{size:"small",checked:a.is_active,onChange:i=>{i.stopPropagation(),Je(a.id,i.target.checked)},sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:d.primary},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:d.primary}}}),label:e.jsx(o.Typography,{sx:{fontSize:"12px",fontFamily:I.fontFamily,color:d.textTertiary},children:"Active"}),onClick:i=>i.stopPropagation(),sx:{mr:0}}),e.jsx(o.IconButton,{size:"small",disabled:v===0,onClick:i=>{i.stopPropagation(),fe(a.id,"up")},"aria-label":"Move phase up",sx:{opacity:v===0?.4:1,color:d.textTertiary},children:e.jsx(se,{size:16})}),e.jsx(o.IconButton,{size:"small",disabled:v===l.length-1,onClick:i=>{i.stopPropagation(),fe(a.id,"down")},"aria-label":"Move phase down",sx:{opacity:v===l.length-1?.4:1,color:d.textTertiary},children:e.jsx(le,{size:16})}),e.jsx(o.IconButton,{size:"small",onClick:i=>{i.stopPropagation(),W(a.id)},sx:{color:d.error},"aria-label":"Delete phase",children:e.jsx(H,{size:16})})]}),e.jsx(o.AccordionDetails,{sx:{px:"16px",py:"12px",backgroundColor:d.bgMain},children:e.jsxs(o.Stack,{spacing:0,children:[(Array.isArray(a.items)?a.items:[]).map((i,S)=>{var B,z;return e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"12px",py:"10px",borderBottom:`1px solid ${d.borderLight}`},children:[e.jsx(o.Typography,{sx:{flex:1,fontSize:"13px",fontFamily:I.fontFamily,color:d.textSecondary},children:i.name}),e.jsx(o.Chip,{label:i.item_type,size:"small",variant:"outlined",sx:{fontSize:"11px",fontFamily:I.fontFamily,borderColor:d.borderDark,color:d.textTertiary,borderRadius:"4px"}}),e.jsx(o.FormControlLabel,{control:e.jsx(o.Switch,{size:"small",checked:i.is_required,onChange:P=>Re(i.id,P.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:d.primary},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:d.primary}}}),label:e.jsx(o.Typography,{sx:{fontSize:"11px",fontFamily:I.fontFamily,color:d.textTertiary},children:"Required"}),sx:{mr:0}}),e.jsxs(o.Stack,{direction:"row",alignItems:"center",sx:{gap:"4px",pl:"12px",borderLeft:`1px solid ${d.borderLight}`},children:[e.jsx(o.IconButton,{size:"small",disabled:S===0,onClick:()=>ye(a.id,a.items??[],i.id,"up"),"aria-label":"Move item up",sx:{opacity:S===0?.4:1,color:d.textTertiary},children:e.jsx(se,{size:14})}),e.jsx(o.IconButton,{size:"small",disabled:S===(((B=a.items)==null?void 0:B.length)??0)-1,onClick:()=>ye(a.id,a.items??[],i.id,"down"),"aria-label":"Move item down",sx:{opacity:S===(((z=a.items)==null?void 0:z.length)??0)-1?.4:1,color:d.textTertiary},children:e.jsx(le,{size:14})}),e.jsx(o.IconButton,{size:"small",onClick:()=>X(i.id),sx:{color:d.error},"aria-label":"Delete item",children:e.jsx(H,{size:14})})]})]},i.id)}),F===a.id?e.jsxs(o.Stack,{direction:"row",sx:{gap:"8px",pt:"12px"},alignItems:"center",children:[e.jsx(o.TextField,{placeholder:"Item name",value:M,onChange:i=>L(i.target.value),size:"small",sx:{...K,flex:1}}),e.jsx(o.Select,{value:_,onChange:i=>C(i.target.value),size:"small",sx:{...je,minWidth:120},children:qe.map(i=>e.jsx(o.MenuItem,{value:i.value,sx:{fontSize:"13px"},children:i.label},i.value))}),e.jsx(o.FormControlLabel,{control:e.jsx(o.Switch,{size:"small",checked:w,onChange:i=>T(i.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:d.primary},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:d.primary}}}),label:e.jsx(o.Typography,{sx:{fontSize:"11px",fontFamily:I.fontFamily,color:d.textTertiary},children:"Req"}),sx:{ml:"4px"}}),e.jsx(o.Button,{variant:"contained",size:"small",onClick:()=>Qe(a.id),disabled:!M.trim()||x,sx:Y,children:"Add"}),e.jsx(o.Button,{variant:"text",size:"small",onClick:()=>{A(null),L("")},sx:{...m,border:"none"},children:"Cancel"})]}):e.jsx(o.Button,{variant:"text",size:"small",startIcon:e.jsx(ce,{size:14}),onClick:()=>A(a.id),sx:{alignSelf:"flex-start",mt:"12px",textTransform:"none",fontSize:"13px",fontFamily:I.fontFamily,color:d.primary,"&:hover":{backgroundColor:d.bgAccent}},children:"Add item"})]})})]},a.id)),e.jsxs(o.Box,{sx:{border:`1px dashed ${d.borderDark}`,borderRadius:"4px",p:"16px",backgroundColor:d.bgMain},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"13px",fontFamily:I.fontFamily,color:d.textSecondary,mb:"12px"},children:"Add new phase"}),e.jsxs(o.Stack,{sx:{gap:"10px"},children:[e.jsx(o.TextField,{placeholder:"Phase name",value:y,onChange:a=>u(a.target.value),size:"small",fullWidth:!0,sx:K}),e.jsx(o.TextField,{placeholder:"Description (optional)",value:h,onChange:a=>k(a.target.value),size:"small",multiline:!0,rows:2,fullWidth:!0,sx:K}),e.jsx(o.Button,{variant:"contained",size:"small",startIcon:e.jsx(ce,{size:14}),onClick:Ze,disabled:!y.trim()||x,sx:{...Y,alignSelf:"flex-start"},children:"Create phase"})]})]})]})}),e.jsx(o.DialogActions,{sx:{px:"20px",py:"12px",borderTop:`1px solid ${d.borderLight}`},children:e.jsx(o.Button,{variant:"outlined",onClick:()=>g(!1),sx:m,children:"Close"})})]}),e.jsxs(o.Dialog,{open:D!==null,onClose:()=>W(null),sx:ee,children:[e.jsx(o.DialogTitle,{sx:{fontWeight:600,fontSize:"16px",fontFamily:I.fontFamily,color:d.textPrimary},children:"Delete phase"}),e.jsx(o.DialogContent,{children:e.jsx(o.Typography,{sx:{fontSize:"13px",fontFamily:I.fontFamily,color:d.textSecondary},children:"Delete this phase and all its items? This cannot be undone."})}),e.jsxs(o.DialogActions,{sx:{px:"20px",py:"12px"},children:[e.jsx(o.Button,{onClick:()=>W(null),sx:m,children:"Cancel"}),e.jsx(o.Button,{onClick:Xe,variant:"contained",disabled:x,sx:{...Y,backgroundColor:d.error,"&:hover":{backgroundColor:"#dc2626"}},children:"Delete"})]})]}),e.jsxs(o.Dialog,{open:Z!==null,onClose:()=>X(null),sx:ee,children:[e.jsx(o.DialogTitle,{sx:{fontWeight:600,fontSize:"16px",fontFamily:I.fontFamily,color:d.textPrimary},children:"Delete item"}),e.jsx(o.DialogContent,{children:e.jsx(o.Typography,{sx:{fontSize:"13px",fontFamily:I.fontFamily,color:d.textSecondary},children:"Delete this item? This cannot be undone."})}),e.jsxs(o.DialogActions,{sx:{px:"20px",py:"12px"},children:[e.jsx(o.Button,{onClick:()=>X(null),sx:m,children:"Cancel"}),e.jsx(o.Button,{onClick:Ve,variant:"contained",disabled:x,sx:{...Y,backgroundColor:d.error,"&:hover":{backgroundColor:"#dc2626"}},children:"Delete"})]})]})]})}const Ue=({modelId:t})=>{const l=re.useNavigate(),n=c=>{c.stopPropagation(),l(`/model-inventory/models/${t}`)};return e.jsx(o.Tooltip,{title:"View Lifecycle",arrow:!0,placement:"top",children:e.jsx(o.IconButton,{size:"small",onClick:n,sx:{color:"#667085","&:hover":{color:"#13715B",backgroundColor:"rgba(19, 113, 91, 0.08)"}},children:e.jsx(Ce,{size:16})})})};function He({modelId:t,apiServices:l}){const n=o.useTheme(),c=re.useNavigate(),[r,x]=s.useState(null),[p,f]=s.useState(!0);return s.useEffect(()=>{if(!t||!l)return;(async()=>{var y;f(!0);try{const u=await l.get(`/modelInventory/${t}`);x(((y=u.data)==null?void 0:y.data)||u.data)}catch(u){console.error("Failed to fetch model:",u)}finally{f(!1)}})()},[t,l]),p?e.jsx(o.Stack,{alignItems:"center",justifyContent:"center",sx:{py:"64px"},children:e.jsx(o.CircularProgress,{})}):r?e.jsxs(o.Stack,{spacing:0,sx:{gap:"16px",maxWidth:"1400px",width:"100%"},children:[e.jsx(o.Box,{sx:{border:`1px solid ${n.palette.divider}`,borderRadius:"4px",p:"20px",backgroundColor:n.palette.background.paper},children:e.jsxs(o.Stack,{sx:{gap:"16px"},children:[e.jsxs(o.Box,{component:"button",onClick:()=>c("/model-inventory"),sx:{display:"flex",alignItems:"center",gap:"8px",background:"none",border:"none",cursor:"pointer",padding:0,color:n.palette.text.secondary,fontSize:"14px","&:hover":{color:n.palette.text.primary}},children:[e.jsx(ue,{size:16}),"Back to Model Inventory"]}),e.jsx(o.Stack,{direction:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",sx:{gap:"16px"},children:e.jsxs(o.Stack,{sx:{gap:"6px"},children:[e.jsx(o.Typography,{sx:{fontWeight:600,fontSize:"16px",color:n.palette.text.primary},children:r.model||r.provider_model}),e.jsxs(o.Stack,{direction:"row",sx:{gap:"16px"},children:[r.provider&&e.jsxs(o.Typography,{sx:{fontSize:"13px",color:n.palette.text.secondary},children:["Provider: ",e.jsx("strong",{children:r.provider})]}),r.version&&e.jsxs(o.Typography,{sx:{fontSize:"13px",color:n.palette.text.secondary},children:["Version: ",e.jsx("strong",{children:r.version})]})]})]})})]})}),e.jsx(pe,{modelId:t,apiServices:l})]}):e.jsx(o.Stack,{alignItems:"center",justifyContent:"center",sx:{py:"64px"},children:e.jsx(o.Typography,{children:"Model not found"})})}return N.ModelLifecycleConfig=me,N.ModelLifecycleDetail=He,N.ModelLifecycleTab=pe,N.ViewLifecycleButton=Ue,Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),N}({},jsxRuntime,React,MUI,ReactRouterDOM);
//# sourceMappingURL=index.esm.js.map
